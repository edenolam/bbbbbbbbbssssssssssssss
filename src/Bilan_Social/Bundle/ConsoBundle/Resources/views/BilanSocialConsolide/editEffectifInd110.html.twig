
    {% if formEffectif110 is defined %}
        {% set bilan_social_consolide = formEffectif110.vars.data %}
        {{ form_start(formEffectif110) }}

        <h5>
            <span id="total111">Champ : les tableaux qui suivent concernent les agents titulaires et contractuels occupant un emploi permanent</span>
        </h5>

        Total [1.1.1] = {{total111}}  <br/>

        <table width="100%" id="ind1101Table" class="table table-striped table-hover table-bordered">
            <thead>
                <tr>
                    <th class="th-tableau-ind" rowspan="3">Emplois fonctionnels</th>
                    <th colspan="15" style="text-align: center">Fonctionnaires de la fonction publique territoriale</th>
                    <th rowspan="3" style="text-align: center">Total</th>
                </tr>
                <tr>
                    <th colspan="2" style="text-align: center">Administrateurs</th>
                    <th></th>
                    <th colspan="2" style="text-align: center">Attachés</th>
                    <th></th>
                    <th colspan="2" style="text-align: center">Ingénieurs en chef</th>
                    <th></th>
                    <th colspan="2" style="text-align: center">Ingénieurs</th>
                    <th></th>
                    <th colspan="2" style="text-align: center">Autres</th>
                    <th></th>
                </tr>
                <tr>
                    <th style="text-align: center">Hommes</th>
                    <th style="text-align: center">Femmes</th>
                    <th style="text-align: center">Total</th>
                    <th style="text-align: center">Hommes</th>
                    <th style="text-align: center">Femmes</th>
                    <th style="text-align: center">Total</th>
                    <th style="text-align: center">Hommes</th>
                    <th style="text-align: center">Femmes</th>
                    <th style="text-align: center">Total</th>
                    <th style="text-align: center">Hommes</th>
                    <th style="text-align: center">Femmes</th>
                    <th style="text-align: center">Total</th>
                    <th style="text-align: center">Hommes</th>
                    <th style="text-align: center">Femmes</th>
                    <th style="text-align: center">Total</th>
                </tr>
            </thead>
            <tbody class="ind_table_totaux">
                {% for tag in formEffectif110.ind1101sTemp %}
                    {% set ref_exclude = (tag.refEmploiFonctionnel.vars.data.blExclutotal == true) %}
                    {% set row_data = tag.vars.value %}
                    {% set total_adm = row_data.r1101 + row_data.r1102 %}
                    {% set total_att = row_data.r1103 + row_data.r1104 %}
                    {% set total_ingc = row_data.r1105 + row_data.r1106 %}
                    {% set total_ing = row_data.r1107 + row_data.r1108 %}
                    {% set total_aut = row_data.r1109 + row_data.r1110 %}
                    <tr {{ ref_exclude == true ? 'data-exclude-from-total="true"' : '' }}>
                        <td style="min-width: 400px">
                            {{ tag.refEmploiFonctionnel.vars.data.lbEmplfonc }}
                            {{ form_widget(tag.refEmploiFonctionnel) }}</td>
                        <td id="r1101" style="text-align: center" data-col-group='row_total_adm'>{{ form_widget(tag.r1101) }}</td>
                        <td id="r1102" style="text-align: center" data-col-group='row_total_adm'>{{ form_widget(tag.r1102) }}</td>
                        <td style="text-align: center" data-col-id='row_total_adm' data-col-group="lineTot1">{{ total_adm }}</td>
                        <td id="r1103" style="text-align: center" data-col-group='row_total_att'>{{ form_widget(tag.r1103) }}</td>
                        <td id="r1104" style="text-align: center" data-col-group='row_total_att'>{{ form_widget(tag.r1104) }}</td>
                        <td style="text-align: center" data-col-id='row_total_att' data-col-group="lineTot1">{{ total_att }}</td>
                        <td id="r1105" style="text-align: center" data-col-group='row_total_ingc'>{{ form_widget(tag.r1105) }}</td>
                        <td id="r1106" style="text-align: center" data-col-group='row_total_ingc'>{{ form_widget(tag.r1106) }}</td>
                        <td style="text-align: center" data-col-id='row_total_ingc' data-col-group="lineTot1">{{ total_ingc }}</td>
                        <td id="r1107" style="text-align: center" data-col-group='row_total_ing'>{{ form_widget(tag.r1107) }}</td>
                        <td id="r1108" style="text-align: center" data-col-group='row_total_ing'>{{ form_widget(tag.r1108) }}</td>
                        <td style="text-align: center" data-col-id='row_total_ing' data-col-group="lineTot1">{{ total_ing }}</td>
                        <td id="r1109" style="text-align: center" data-col-group='row_total_aut'>{{ form_widget(tag.r1109) }}</td>
                        <td id="r1110" style="text-align: center" data-col-group='row_total_aut'>{{ form_widget(tag.r1110) }}</td>
                        <td style="text-align: center" data-col-id='row_total_aut' data-col-group="lineTot1">{{ total_aut }}</td>
                        <td id="lineTot1" style="text-align: center" data-col-id="lineTot1">{{ ref_exclude ? '(0)' : total_adm + total_att + total_ingc + total_ing + total_aut }}</td>
                    </tr>
                {% endfor %}

                {% if formEffectif110.ind1101sTemp.count() > 0  %}
                    {% set total_ind = bilan_social_consolide.getIndPileForBy('ind1101sTemp') %}
                    {% set total_adm = total_ind.r1101 + total_ind.r1102 %}
                    {% set total_att = total_ind.r1103 + total_ind.r1104 %}
                    {% set total_ingc = total_ind.r1105 + total_ind.r1106 %}
                    {% set total_ing = total_ind.r1107 + total_ind.r1108 %}
                    {% set total_aut = total_ind.r1109 + total_ind.r1110 %}
                    <tr id="total1101" class="row_totaux">
                        <td style="min-width: 400px"><b>TOTAL EMPLOIS FONCTIONNELS</b></td>
                        <td style="text-align: center" data-col-group='row_total_adm'>0</td>
                        <td style="text-align: center" data-col-group='row_total_adm'>0</td>
                        <td style="text-align: center" data-col-id='row_total_adm' data-col-group='lineTot1'>{{ total_adm }}</td>
                        <td style="text-align: center" data-col-group='row_total_att'>0</td>
                        <td style="text-align: center" data-col-group='row_total_att'>0</td>
                        <td style="text-align: center" data-col-id='row_total_att' data-col-group='lineTot1'>{{ total_att }}</td>
                        <td style="text-align: center" data-col-group='row_total_ingc'>0</td>
                        <td style="text-align: center" data-col-group='row_total_ingc'>0</td>
                        <td style="text-align: center" data-col-id='row_total_ingc' data-col-group='lineTot1'>{{ total_ingc }}</td>
                        <td style="text-align: center" data-col-group='row_total_ing'>0</td>
                        <td style="text-align: center" data-col-group='row_total_ing'>0</td>
                        <td style="text-align: center" data-col-id='row_total_ing' data-col-group='lineTot1'>{{ total_ing }}</td>
                        <td style="text-align: center" data-col-group='row_total_aut'>0</td>
                        <td style="text-align: center" data-col-group='row_total_aut'>0</td>
                        <td style="text-align: center" data-col-id='row_total_aut' data-col-group='lineTot1'>{{ total_aut }}</td>
                        <td style="text-align: center" data-col-id="lineTot1">{{ total_adm + total_att + total_ingc + total_ing + total_aut }}</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>

        <br/>


        {% if indicateur_precedent.0 is defined and indicateur_precedent.0 is not null %}
            {{ include('ConsoBundle:BilanSocialConsolide:modals_ind_precedents/btn_modal.html.twig', { 'indicateur_precedent': indicateur_precedent.0, 'name' : 1101 }) }}
            {{ include('ConsoBundle:BilanSocialConsolide:modals_ind_precedents/modal_1101.html.twig', { 'indicateur_precedent': indicateur_precedent.0 }) }}
        {% endif %}
        <table width="100%"  id="ind1102Table" class="table table-striped table-hover table-bordered">
            <thead>
                <tr>
                    <th class="th-tableau-ind" rowspan="3" >Emplois fonctionnels</th>
                    <th colspan="15" style="text-align: center">Fonctionnaires issus d'une autre administration (FPE, FPH)</th>
                    <th rowspan="3" style="text-align: center">Total</th>
                </tr>
                <tr>
                    <th colspan="2" style="text-align: center">Administrateurs</th>
                    <th></th>
                    <th colspan="2" style="text-align: center">Attachés</th>
                    <th></th>
                    <th colspan="2" style="text-align: center">Ingénieurs en chef</th>
                    <th></th>
                    <th colspan="2" style="text-align: center">Ingénieurs</th>
                    <th></th>
                    <th colspan="2" style="text-align: center">Autres</th>
                    <th></th>
                </tr>
                <tr>
                    <th style="text-align: center">Hommes</th>
                    <th style="text-align: center">Femmes</th>
                    <th style="text-align: center">Total</th>
                    <th style="text-align: center">Hommes</th>
                    <th style="text-align: center">Femmes</th>
                    <th style="text-align: center">Total</th>
                    <th style="text-align: center">Hommes</th>
                    <th style="text-align: center">Femmes</th>
                    <th style="text-align: center">Total</th>
                    <th style="text-align: center">Hommes</th>
                    <th style="text-align: center">Femmes</th>
                    <th style="text-align: center">Total</th>
                    <th style="text-align: center">Hommes</th>
                    <th style="text-align: center">Femmes</th>
                    <th style="text-align: center">Total</th>
                </tr>
            </thead>
            <tbody class="ind_table_totaux">
                {% for tag in formEffectif110.ind1102sTemp %}
                    {% set ref_exclude = (tag.refEmploiFonctionnel.vars.data.blExclutotal == true) %}
                    {% set row_data = tag.vars.value %}
                    {% set total_adm = row_data.r1101 + row_data.r1102 %}
                    {% set total_att = row_data.r1103 + row_data.r1104 %}
                    {% set total_ingc = row_data.r1105 + row_data.r1106 %}
                    {% set total_ing = row_data.r1107 + row_data.r1108 %}
                    {% set total_aut = row_data.r1109 + row_data.r1110 %}
                    <tr {{ ref_exclude == true ? 'data-exclude-from-total="true"' : '' }}>
                        <td style="min-width: 400px">
                            {{ tag.refEmploiFonctionnel.vars.data.lbEmplfonc }}
                            {{ form_widget(tag.refEmploiFonctionnel) }}</td>
                        <td id="r1101" style="text-align: center" data-col-group='row_total_adm'>{{ form_widget(tag.r1101) }}</td>
                        <td id="r1102" style="text-align: center" data-col-group='row_total_adm'>{{ form_widget(tag.r1102) }}</td>
                        <td style="text-align: center" data-col-id='row_total_adm' data-col-group="lineTot1">{{ total_adm }}</td>
                        <td id="r1103" style="text-align: center" data-col-group='row_total_att'>{{ form_widget(tag.r1103) }}</td>
                        <td id="r1104" style="text-align: center" data-col-group='row_total_att'>{{ form_widget(tag.r1104) }}</td>
                        <td style="text-align: center" data-col-id='row_total_att' data-col-group="lineTot1">{{ total_att }}</td>
                        <td id="r1105" style="text-align: center" data-col-group='row_total_ingc'>{{ form_widget(tag.r1105) }}</td>
                        <td id="r1106" style="text-align: center" data-col-group='row_total_ingc'>{{ form_widget(tag.r1106) }}</td>
                        <td style="text-align: center" data-col-id='row_total_ingc' data-col-group='lineTot1'>{{ total_ingc }}</td>
                        <td id="r1107" style="text-align: center" data-col-group='row_total_ing'>{{ form_widget(tag.r1107) }}</td>
                        <td id="r1108" style="text-align: center" data-col-group='row_total_ing'>{{ form_widget(tag.r1108) }}</td>
                        <td style="text-align: center" data-col-id='row_total_ing' data-col-group='lineTot1'>{{ total_ing }}</td>
                        <td id="r1109" style="text-align: center" data-col-group='row_total_aut'>{{ form_widget(tag.r1109) }}</td>
                        <td id="r1110" style="text-align: center" data-col-group='row_total_aut'>{{ form_widget(tag.r1110) }}</td>
                        <td style="text-align: center" data-col-id='row_total_aut' data-col-group='lineTot1'>{{ total_aut }}</td>
                        <td id="lineTot1" style="text-align: center" data-col-id="lineTot1">{{ ref_exclude ? '(0)' : total_adm + total_att + total_ingc + total_ing + total_aut }}</td>
                    </tr>
                {% endfor %}
                {% if formEffectif110.ind1102sTemp.count() > 0  %}
                    <tr id="total1102" class="row_totaux">
                        <td style="min-width: 400px"><b>TOTAL EMPLOIS FONCTIONNELS</b></td>
                        <td style="text-align: center" data-col-group='row_total_adm'>0</td>
                        <td style="text-align: center" data-col-group='row_total_adm'>0</td>
                        <td style="text-align: center" data-col-id='row_total_adm' data-col-group='lineTot1'>{{ total_adm }}</td>
                        <td style="text-align: center" data-col-group='row_total_att'>0</td>
                        <td style="text-align: center" data-col-group='row_total_att'>0</td>
                        <td style="text-align: center" data-col-id='row_total_att' data-col-group='lineTot1'>{{ total_att }}</td>
                        <td style="text-align: center" data-col-group='row_total_ingc'>0</td>
                        <td style="text-align: center" data-col-group='row_total_ingc'>0</td>
                        <td style="text-align: center" data-col-id='row_total_ingc' data-col-group='lineTot1'>{{ total_ingc }}</td>
                        <td style="text-align: center" data-col-group='row_total_ing'>0</td>
                        <td style="text-align: center" data-col-group='row_total_ing'>0</td>
                        <td style="text-align: center" data-col-id='row_total_ing' data-col-group='lineTot1'>{{ total_ing }}</td>
                        <td style="text-align: center" data-col-group='row_total_aut'>0</td>
                        <td style="text-align: center" data-col-group='row_total_aut'>0</td>
                        <td style="text-align: center" data-col-id='row_total_aut' data-col-group='lineTot1'>{{ total_aut }}</td>
                        <td style="text-align: center" data-col-id="lineTot1">{{ total_adm + total_att + total_ingc + total_ing + total_aut }}</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
        {% if indicateur_precedent.1 is defined and indicateur_precedent.1 is not null %}
            {{ include('ConsoBundle:BilanSocialConsolide:modals_ind_precedents/btn_modal.html.twig', { 'indicateur_precedent': indicateur_precedent.1, 'name' : 1102 }) }}
            {{ include('ConsoBundle:BilanSocialConsolide:modals_ind_precedents/modal_1102.html.twig', { 'indicateur_precedent': indicateur_precedent.1 }) }}
        {% endif %}
        <br/>

        Total [1.2.1] = {{total121}}  <br/>

        <table width="100%"  id="ind1103Table" class="table table-striped table-hover table-bordered">
            <thead>
                <tr>
                    <th class="th-tableau-ind" rowspan="2">Emplois fonctionnels</th>
                    <th colspan="2" style="text-align: center">Contractuels sur emplois permanents</th>
                    <th rowspan="2" style="text-align: center">Total</th>
                </tr>
                <tr>
                    <th style="text-align: center">Hommes</th>
                    <th style="text-align: center">Femmes</th>
                </tr>
            </thead>
            <tbody>
                {% for tag in formEffectif110.ind1103sTemp %}
                    {% set ref_exclude = (tag.refEmploiFonctionnel.vars.data.blExclutotal == true) %}
                    <tr {{ ref_exclude == true ? 'data-exclude-from-total="true"' : '' }}>
                        <td style="min-width: 400px">
                            {{ tag.refEmploiFonctionnel.vars.data.lbEmplfonc }}
                            {{ form_widget(tag.refEmploiFonctionnel) }}</td>
                        <td id="r1101" style="text-align: center">{{ form_widget(tag.r1101) }}</td>
                        <td id="r1102" style="text-align: center">{{ form_widget(tag.r1102) }}</td>
                        <td id="lineTot1" style="text-align: center">{{ ref_exclude ? '(0)' : 0 }}</td>
                    </tr>
                {% endfor %}
                {% if formEffectif110.ind1103sTemp.count() > 0  %}
                    <tr id="total1103">
                        <td style="min-width: 400px"><b>TOTAL EMPLOIS FONCTIONNELS</b></td>
                        <td style="text-align: center">0</td>
                        <td style="text-align: center">0</td>
                        <td style="text-align: center">0</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
        {% if indicateur_precedent.2 is defined and indicateur_precedent.2 is not null %}
            {{ include('ConsoBundle:BilanSocialConsolide:modals_ind_precedents/btn_modal.html.twig', { 'indicateur_precedent': indicateur_precedent.2, 'name' : 1103 }) }}
            {{ include('ConsoBundle:BilanSocialConsolide:modals_ind_precedents/modal_1103.html.twig', { 'indicateur_precedent': indicateur_precedent.2 }) }}
        {% endif %}
        <br/>


        <input class="btn button-tableau pull-right" type="submit" value="Enregistrer et valider les contrôles de cohérence" name="valider" onclick="recordAuto = false;
                $('#progImg').show();" data-valide="1" />

        <img id="progImg" src="{{ asset("img/progress.gif") }}" style="display:none"/>

        {{ form_end(formEffectif110) }}




        <script type="text/javascript">

            $(document).ready(function ()
            {
                changeDetect = false;
                // TABLEAU 110X
            {% if questionCollectiviteConsolide.q8 == true  %}
                    // Manip pour cacher la liste des Empl Fct pour en afficher que le libellé tout en conservant l'id à  submit
                    $(document).change();

                    // update1101(true);
                    // update1102(true);
                    update1103(true);
            {% endif %}

                });


                /*
                 * METHODES Tableau 1.1.0.X
                 */
            {% if questionCollectiviteConsolide.q8 == true %}
                function changedR1101(obj) {
                    // update1101(false);
                }
                function changedR1102(obj) {
                    // update1102(false);
                }
                function changedR1103(obj) {
                    update1103(false);
                }

                function update1101(onInit) {
                    var table1101 = document.getElementById('ind1101Table');
                    var rowLength1101 = table1101.rows.length;
                    var idxRowInput = 0;
                    var mtTot1 = 0;
                    var mtTot2 = 0;
                    var mtTot3 = 0;
                    var mtTot4 = 0;
                    var mtTot5 = 0;
                    var mtTot6 = 0;
                    var mtTot7 = 0;
                    var mtTot8 = 0;
                    var mtTot9 = 0;
                    var mtTot10 = 0;
                    var mtTot1Emp = 0;
                    var mtTot2Emp = 0;
                    var mtTot3Emp = 0;
                    var mtTot4Emp = 0;
                    var mtTot5Emp = 0;
                    var mtTot6Emp = 0;
                    var mtTot7Emp = 0;
                    var mtTot8Emp = 0;
                    var mtTot9Emp = 0;
                    var mtTot10Emp = 0;
                    for (var i = 3; i < rowLength1101; i += 1) {
                        var row = table1101.rows[i];
                        var row_exclude_from_total = ($(row).attr('data-exclude-from-total')=='true');
                        var cellLength = row.cells.length;
                        var lineTotalEmp = false;

                        var lineTot1 = 0;

                        if (row.id.substring(0, 9) == "total1101") {
                            lineTotalEmp = true;
                            for (var y = 0; y < cellLength; y += 1) {
                                var cell = row.cells[y];
                                if (y == 1) {
                                    cell.innerHTML = mtTot1;
                                    lineTot1 += mtTot1;
                                    mtTot1 = 0;
                                } else if (y == 2) {
                                    cell.innerHTML = mtTot2;
                                    lineTot1 += mtTot2;
                                    mtTot2 = 0;
                                } else if (y == 3) {
                                    cell.innerHTML = mtTot3;
                                    lineTot1 += mtTot3;
                                    mtTot3 = 0;
                                } else if (y == 4) {
                                    cell.innerHTML = mtTot4;
                                    lineTot1 += mtTot4;
                                    mtTot4 = 0;
                                } else if (y == 5) {
                                    cell.innerHTML = mtTot5;
                                    lineTot1 += mtTot5;
                                    mtTot5 = 0;
                                } else if (y == 6) {
                                    cell.innerHTML = mtTot6;
                                    lineTot1 += mtTot6;
                                    mtTot6 = 0;
                                } else if (y == 7) {
                                    cell.innerHTML = mtTot7;
                                    lineTot1 += mtTot7;
                                    mtTot7 = 0;
                                } else if (y == 8) {
                                    cell.innerHTML = mtTot8;
                                    lineTot1 += mtTot8;
                                    mtTot8 = 0;
                                } else if (y == 9) {
                                    cell.innerHTML = mtTot9;
                                    lineTot1 += mtTot9;
                                    mtTot9 = 0;
                                } else if (y == 10) {
                                    cell.innerHTML = mtTot10;
                                    lineTot1 += mtTot10;
                                    mtTot10 = 0;
                                } else if (y == 11) {
                                    cell.innerHTML = lineTot1;
                                }
                            }
                        }

                        lineTot1 = 0;

                        for (var y = 0; y < cellLength; y += 1) {
                            var cell = row.cells[y];
                            if (cell.id.substring(0, 5) == "r1102") {
                                if ($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1102').val() != "") {
                                    if(!row_exclude_from_total){
                                        mtTot2 += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1102').val());
                                        mtTot2Emp += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1102').val());
                                    }
                                    lineTot1 += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1102').val());
                                    
                                }
                            } else if (cell.id.substring(0, 5) == "r1103") {
                                if ($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1103').val() != "") {
                                    if(!row_exclude_from_total){
                                        mtTot3 += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1103').val());
                                        mtTot3Emp += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1103').val());
                                    }
                                    lineTot1 += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1103').val());
                                    
                                }
                            } else if (cell.id.substring(0, 5) == "r1104") {
                                if ($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1104').val() != "") {
                                    if(!row_exclude_from_total){
                                        mtTot4 += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1104').val());
                                        mtTot4Emp += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1104').val());
                                    }
                                    lineTot1 += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1104').val());
                                    
                                }
                            } else if (cell.id.substring(0, 5) == "r1105") {
                                if ($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1105').val() != "") {
                                    if(!row_exclude_from_total){
                                        mtTot5 += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1105').val());
                                        mtTot5Emp += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1105').val());
                                    }
                                    lineTot1 += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1105').val());
                                    
                                }
                            } else if (cell.id.substring(0, 5) == "r1106") {
                                if ($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1106').val() != "") {
                                    if(!row_exclude_from_total){
                                        mtTot6 += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1106').val());
                                        mtTot6Emp += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1106').val());
                                    }
                                    lineTot1 += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1106').val());
                                    
                                }
                            } else if (cell.id.substring(0, 5) == "r1107") {
                                if ($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1107').val() != "") {
                                    if(!row_exclude_from_total){
                                        mtTot7 += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1107').val());
                                        mtTot7Emp += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1107').val());
                                    }
                                    lineTot1 += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1107').val());
                                    
                                }
                            } else if (cell.id.substring(0, 5) == "r1108") {
                                if ($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1108').val() != "") {
                                    if(!row_exclude_from_total){
                                        mtTot8 += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1108').val());
                                        mtTot8Emp += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1108').val());
                                    }
                                    lineTot1 += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1108').val());
                                    
                                }
                            } else if (cell.id.substring(0, 5) == "r1109") {
                                if ($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1109').val() != "") {
                                    if(!row_exclude_from_total){
                                        mtTot9 += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1109').val());
                                        mtTot9Emp += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1109').val());
                                    }
                                    lineTot1 += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1109').val());
                                    
                                }
                            } else if (cell.id.substring(0, 5) == "r1110") {
                                if ($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1110').val() != "") {
                                    if(!row_exclude_from_total){
                                        mtTot10 += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1110').val());
                                        mtTot10Emp += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1110').val());
                                    }
                                    lineTot1 += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1110').val());
                                    
                                }
                            } else if (cell.id.substring(0, 5) == "r1101") {
                                if ($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1101').val() != "") {
                                    if(!row_exclude_from_total){
                                        mtTot1 += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1101').val());
                                        mtTot1Emp += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1101').val());
                                    }
                                    lineTot1 += parseInt($('#bscForm110_ind1101sTemp_' + idxRowInput + '_r1101').val());
                                    
                                }
                            } else if (cell.id.substring(0, 8) == "lineTot1") {
                                lineTot1 = row_exclude_from_total ? '('+lineTot1+')' : lineTot1;
                                cell.innerHTML = lineTot1;
                            }

                        }

                        if (!lineTotalEmp)
                            idxRowInput++;
                    }// end for line

                    if (!onInit) {

                    }

                }

                function update1102(onInit) {
                    var table1102 = document.getElementById('ind1102Table');
                    var rowLength1102 = table1102.rows.length;
                    var idxRowInput = 0;
                    var mtTot1 = 0;
                    var mtTot2 = 0;
                    var mtTot3 = 0;
                    var mtTot4 = 0;
                    var mtTot5 = 0;
                    var mtTot6 = 0;
                    var mtTot7 = 0;
                    var mtTot8 = 0;
                    var mtTot9 = 0;
                    var mtTot10 = 0;
                    var mtTot1Emp = 0;
                    var mtTot2Emp = 0;
                    var mtTot3Emp = 0;
                    var mtTot4Emp = 0;
                    var mtTot5Emp = 0;
                    var mtTot6Emp = 0;
                    var mtTot7Emp = 0;
                    var mtTot8Emp = 0;
                    var mtTot9Emp = 0;
                    var mtTot10Emp = 0;
                    for (var i = 3; i < rowLength1102; i += 1) {
                        var row = table1102.rows[i];
                        var row_exclude_from_total = ($(row).attr('data-exclude-from-total')=='true');
                        var cellLength = row.cells.length;
                        var lineTotalEmp = false;

                        var lineTot1 = 0;

                        if (row.id.substring(0, 9) == "total1102") {
                            lineTotalEmp = true;
                            for (var y = 0; y < cellLength; y += 1) {
                                var cell = row.cells[y];
                                if (y == 1) {
                                    cell.innerHTML = mtTot1;
                                    lineTot1 += mtTot1;
                                    mtTot1 = 0;
                                } else if (y == 2) {
                                    cell.innerHTML = mtTot2;
                                    lineTot1 += mtTot2;
                                    mtTot2 = 0;
                                } else if (y == 3) {
                                    cell.innerHTML = mtTot3;
                                    lineTot1 += mtTot3;
                                    mtTot3 = 0;
                                } else if (y == 4) {
                                    cell.innerHTML = mtTot4;
                                    lineTot1 += mtTot4;
                                    mtTot4 = 0;
                                } else if (y == 5) {
                                    cell.innerHTML = mtTot5;
                                    lineTot1 += mtTot5;
                                    mtTot5 = 0;
                                } else if (y == 6) {
                                    cell.innerHTML = mtTot6;
                                    lineTot1 += mtTot6;
                                    mtTot6 = 0;
                                } else if (y == 7) {
                                    cell.innerHTML = mtTot7;
                                    lineTot1 += mtTot7;
                                    mtTot7 = 0;
                                } else if (y == 8) {
                                    cell.innerHTML = mtTot8;
                                    lineTot1 += mtTot8;
                                    mtTot8 = 0;
                                } else if (y == 9) {
                                    cell.innerHTML = mtTot9;
                                    lineTot1 += mtTot9;
                                    mtTot9 = 0;
                                } else if (y == 10) {
                                    cell.innerHTML = mtTot10;
                                    lineTot1 += mtTot10;
                                    mtTot10 = 0;
                                } else if (y == 11) {
                                    cell.innerHTML = lineTot1;
                                }
                            }
                        }

                        lineTot1 = 0;

                        for (var y = 0; y < cellLength; y += 1) {
                            var cell = row.cells[y];
                            if (cell.id.substring(0, 5) == "r1101") {
                                if ($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1101').val() != "") {
                                    if(!row_exclude_from_total){
                                        mtTot1 += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1101').val());
                                        mtTot1Emp += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1101').val());
                                    }
                                    lineTot1 += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1101').val());
                                    
                                }
                            } else if (cell.id.substring(0, 5) == "r1102") {
                                if ($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1102').val() != "") {
                                    if(!row_exclude_from_total){
                                        mtTot2 += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1102').val());
                                        mtTot2Emp += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1102').val());
                                    }
                                    lineTot1 += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1102').val());
                                    
                                }
                            } else if (cell.id.substring(0, 5) == "r1103") {
                                if ($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1103').val() != "") {
                                    if(!row_exclude_from_total){
                                        mtTot3 += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1103').val());
                                        mtTot3Emp += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1103').val());
                                    }
                                    lineTot1 += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1103').val());
                                    
                                }
                            } else if (cell.id.substring(0, 5) == "r1104") {
                                if ($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1104').val() != "") {
                                    if(!row_exclude_from_total){
                                        mtTot4 += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1104').val());
                                        mtTot4Emp += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1104').val());
                                    }
                                    lineTot1 += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1104').val());
                                    
                                }
                            } else if (cell.id.substring(0, 5) == "r1105") {
                                if ($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1105').val() != "") {
                                    if(!row_exclude_from_total){
                                        mtTot5 += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1105').val());
                                        mtTot5Emp += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1105').val());
                                    }
                                    lineTot1 += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1105').val());
                                    
                                }
                            } else if (cell.id.substring(0, 5) == "r1106") {
                                if ($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1106').val() != "") {
                                    if(!row_exclude_from_total){
                                        mtTot6 += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1106').val());
                                        mtTot6Emp += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1106').val());
                                    }
                                    lineTot1 += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1106').val());
                                    
                                }
                            } else if (cell.id.substring(0, 5) == "r1107") {
                                if ($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1107').val() != "") {
                                    if(!row_exclude_from_total){
                                        mtTot7 += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1107').val());
                                        mtTot7Emp += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1107').val());
                                    }
                                    lineTot1 += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1107').val());
                                    
                                }
                            } else if (cell.id.substring(0, 5) == "r1108") {
                                if ($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1108').val() != "") {
                                    if(!row_exclude_from_total){
                                        mtTot8 += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1108').val());
                                        mtTot8Emp += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1108').val());
                                    }
                                    lineTot1 += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1108').val());
                                    
                                }
                            } else if (cell.id.substring(0, 5) == "r1109") {
                                if ($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1109').val() != "") {
                                    if(!row_exclude_from_total){
                                        mtTot9 += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1109').val());
                                        mtTot9Emp += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1109').val());
                                    }
                                    lineTot1 += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1109').val());
                                    
                                }
                            } else if (cell.id.substring(0, 5) == "r1110") {
                                if ($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1110').val() != "") {
                                    if(!row_exclude_from_total){
                                        mtTot10 += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1110').val());
                                        mtTot10Emp += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1110').val());
                                    }
                                    lineTot1 += parseInt($('#bscForm110_ind1102sTemp_' + idxRowInput + '_r1110').val());
                                    
                                }
                            } else if (cell.id.substring(0, 8) == "lineTot1") {
                                lineTot1 = row_exclude_from_total ? '('+lineTot1+')' : lineTot1;
                                cell.innerHTML = lineTot1;
                            }


                        }

                        if (!lineTotalEmp)
                            idxRowInput++;
                    }// end for line

                    if (!onInit) {

                    }

                }

                function update1103(onInit) {
                    var table1103 = document.getElementById('ind1103Table');
                    var rowLength1103 = table1103.rows.length;
                    var idxRowInput = 0;
                    var mtTot1 = 0;
                    var mtTot2 = 0;
                    var mtTot1Emp = 0;
                    var mtTot2Emp = 0;
                    for (var i = 2; i < rowLength1103; i += 1) {
                        var row = table1103.rows[i];
                        var row_exclude_from_total = ($(row).attr('data-exclude-from-total')=='true');
                        var cellLength = row.cells.length;
                        var lineTotalEmp = false;

                        var lineTot1 = 0;

                        if (row.id.substring(0, 9) == "total1103") {
                            lineTotalEmp = true;

                            for (var y = 0; y < cellLength; y += 1) {
                                var cell = row.cells[y];
                                if (y == 1) {
                                    cell.innerHTML = mtTot1;
                                    lineTot1 += mtTot1;
                                    mtTot1 = 0;
                                } else if (y == 2) {
                                    cell.innerHTML = mtTot2;
                                    lineTot1 += mtTot2;
                                    mtTot2 = 0;
                                } else if (y == 3) {
                                    cell.innerHTML = lineTot1;
                                }

                            }
                        }

                        lineTot1 = 0;

                        for (var y = 0; y < cellLength; y += 1) {
                            var cell = row.cells[y];
                            if (cell.id.substring(0, 5) == "r1101") {
                                if ($('#bscForm110_ind1103sTemp_' + idxRowInput + '_r1101').val() != "") {
                                    if(!row_exclude_from_total){
                                        mtTot1 += parseInt($('#bscForm110_ind1103sTemp_' + idxRowInput + '_r1101').val());
                                        mtTot1Emp += parseInt($('#bscForm110_ind1103sTemp_' + idxRowInput + '_r1101').val());
                                    }
                                    lineTot1 += parseInt($('#bscForm110_ind1103sTemp_' + idxRowInput + '_r1101').val());
                                    
                                }
                            } else if (cell.id.substring(0, 5) == "r1102") {
                                if ($('#bscForm110_ind1103sTemp_' + idxRowInput + '_r1102').val() != "") {
                                    if(!row_exclude_from_total){
                                        mtTot2 += parseInt($('#bscForm110_ind1103sTemp_' + idxRowInput + '_r1102').val());
                                        mtTot2Emp += parseInt($('#bscForm110_ind1103sTemp_' + idxRowInput + '_r1102').val());
                                    }
                                    lineTot1 += parseInt($('#bscForm110_ind1103sTemp_' + idxRowInput + '_r1102').val());
                                    
                                }
                            } else if (cell.id.substring(0, 8) == "lineTot1") {
                                lineTot1 = row_exclude_from_total ? '('+lineTot1+')' : lineTot1;
                                cell.innerHTML = lineTot1;
                            }

                        }

                        if (!lineTotalEmp)
                            idxRowInput++;
                    }// end for line

                    if (!onInit) {

                    }

                }

            {% endif %}

                /*
                 * METHODE AJAX SUBMIT
                 */
                $(function () {
                    // Enregistrement en ajax
                    $('form').on('submit', function (e) {
                        var $this = $(this).closest('div');
                        var btn = $(this).find("input[type=submit]:focus");
                        var value_valide = $(btn).data('valide');
                        $('#bscForm110_valide').val(value_valide);

                        // Submit en ajax pour le fonctionnement d'appel par onglet // $('form').serialize(), 'valide': test
                        e.preventDefault();
                        $.ajax({
                            type: 'post',
                            url: '{{ path('bilan_conso_effectif_ind110_edit') }}',
                            data: $('form').serialize(),
                            success: function (responsejson) {

                    if (responsejson.data == 1) {
                        if (recordAuto) {
                            $('#progImg').hide();
                            $('#messageJS').html("Enregistrement automatique réussi");
                            messageJS.dialog("open");
                            setIncoherenceTable(responsejson);

                        } else {
                            $('#ind110').load('{{ path('bilan_conso_effectif_ind110_edit') }}', function () {
                                $('#progImg').hide();
                                $('#messageJS').html("Enregistrement réussi");
                                messageJS.dialog("open");
                                setIncoherenceTable(responsejson);

                                var next = $($this).next('.panel-heading');
                                if(next.length == 0) {
                                    window.location.href = '{{ path('bilan_conso_mouv_edit') }}';
                                }
                            });
                        }
                    } else if (responsejson.data == "-3") {
                        $('#progImg').hide();
                        $('#messageJS').html("{{'erreur.unique.violation'|trans}}");
                        messageJS.dialog("open");
                    } else {
                        $('#progImg').hide();
                        $('#messageJS').html("Une erreur s'est produite dans l'enregistrement 1");
                        messageJS.dialog("open");
                    }

                },
                error: function (xhr, status, error) {
                    //alert(xhr);
                    $('#progImg').hide();
                    $('#messageJS').html("Une erreur s'est produite dans l'enregistrement : ");
                    messageJS.dialog("open");
                }

            });
        });
    }
    )
            ;

        </script>
    {% endif %}
