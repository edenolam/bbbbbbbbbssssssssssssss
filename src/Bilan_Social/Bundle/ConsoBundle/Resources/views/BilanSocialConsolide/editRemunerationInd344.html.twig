
{% set campagne = campagne_service.GetCurrentCampagne() %}
    {% set AnneeCamp = '' %}
    {% if campagne is not null %}
        {% set AnneeCamp = campagne.nmAnne %}
    {% endif %}

    {% if formRemuneration344 is defined %}
        {% set bilan_social_consolide = formRemuneration344.vars.data %}
        {{ form_start(formRemuneration344) }}

        {{ form_row(formRemuneration344.q344) }}

        <div id="ind344b" style="display: none;">

            <h5>
                Champ : le tableau qui suit concerne les agents titulaires, stagiaires et contractuels sur emploi permanent
            </h5>

            <table width="100%" id="ind344Table" class="table table-striped table-hover table-bordered">
                <thead>
                <tr entete="1">
                    <th width="20%" rowspan="4">Cadres d'emplois<br/>Filières</th>
                    <th colspan="14" style="text-align: center">Fonctionnaires</th>
                    <th colspan="7" style="text-align: center">Contractuels</th>
                    <th class="filiTable" rowspan="4" style="text-align: center">Total</th>
                </tr>

                <tr entete="1">
                    <th colspan="7" style="text-align: center">Temps complet</th>
                    <th colspan="7" style="text-align: center">Temps non complet</th>
                    <th colspan="7" style="text-align: center"></th>
                </tr>

                <tr entete="1">
                    <th colspan="3" style="text-align: center">Nombre d'heures supplémentaires réalisées et rémunérées en {{AnneeCamp}}</th>
                    <th colspan="3" style="text-align: center">Nombre d'heures complémentaires réalisées et rémunérées en {{AnneeCamp}}</th>
                    <th class="filiTable" rowspan="2" style="text-align: center">Total Temps complets</th>
                    <th colspan="3" style="text-align: center">Nombre d'heures supplémentaires réalisées et rémunérées en {{AnneeCamp}}</th>
                    <th colspan="3" style="text-align: center">Nombre d'heures complémentaires réalisées et rémunérées en {{AnneeCamp}}</th>
                    <th class="filiTable" rowspan="2" style="text-align: center">Total Temps non complet</th>
                    <th colspan="3" style="text-align: center">Nombre d'heures supplémentaires réalisées et rémunérées en {{AnneeCamp}}</th>
                    <th colspan="3" style="text-align: center">Nombre d'heures complémentaires réalisées et rémunérées en {{AnneeCamp}}</th>
                    <th class="filiTable" rowspan="2" style="text-align: center">Total contractuels</th>
                </tr>

                <tr entete="1">
                    <th  style="text-align: center">Hommes</th>
                    <th style="text-align: center">Femmes</th>
                    <th class="filiTable" style="text-align: center">Total</th>
                    <th style="text-align: center">Hommes</th>
                    <th style="text-align: center">Femmes</th>
                    <th class="filiTable" style="text-align: center">Total</th>
                    <th style="text-align: center">Hommes</th>
                    <th style="text-align: center">Femmes</th>
                    <th class="filiTable" style="text-align: center">Total</th>
                    <th style="text-align: center">Hommes</th>
                    <th style="text-align: center">Femmes</th>
                    <th class="filiTable" style="text-align: center">Total</th>
                    <th style="text-align: center">Hommes</th>
                    <th style="text-align: center">Femmes</th>
                    <th class="filiTable" style="text-align: center">Total</th>
                    <th style="text-align: center">Hommes</th>
                    <th style="text-align: center">Femmes</th>
                    <th class="filiTable" style="text-align: center">Total</th>
                </tr>

                </thead>
                <tbody id="344tbody" class="ind_table_totaux">
                {% for tagF in filieres %}

                    <tr id="entetFil" hide="1" idFili="{{ tagF.idFili }}" style="text-align: center" >
                        <td colspan="23">
                            &nbsp;&nbsp;&nbsp;&nbsp;{{ tagF.lbFili }}
                            {% for key,tot in arrayTotalFiliere %}
                                {% if(key == tagF.idFili) %}
                                    <span class="alerteConso">[{% if(tot) == null %} 0 {% else %} {{ tot }} {% endif %}]</span>
                                {% endif %}
                            {% endfor %}
                            {% if idFili == tagF.idFili%}
                                <input class="buttonmoins" type="button" id="toggle344_{{ tagF.idFili}}"
                                       onclick="toggleFiliere344(this, {{ tagF.idFili}})">
                            {% endif%}

                            {% if idFili != tagF.idFili%}
                                <input class="buttonplus" type="button" id="toggle344_{{ tagF.idFili}}"
                                       onclick="toggleFiliere344(this, {{ tagF.idFili}})">
                            {% endif%}
                        </td>
                    </tr>

                    {% if idFili == tagF.idFili%}
                        {% for tag in formRemuneration344.ind344sTemp %}
                            {% set row_data = tag.vars.value %}
                            {% set total_row_hf1_temps_complet = row_data.r3441 + row_data.r3442 %}
                            {% set total_row_hf2_temps_complet = row_data.r3443 + row_data.r3444 %}
                            {% set total_temps_complet = total_row_hf1_temps_complet + total_row_hf2_temps_complet %}
                            {% set total_row_hf1_temps_non_complet = row_data.r3445 + row_data.r3446 %}
                            {% set total_row_hf2_temps_non_complet = row_data.r3447 + row_data.r3448 %}
                            {% set total_temps_non_complet = total_row_hf1_temps_non_complet + total_row_hf2_temps_non_complet %}
                            {% set total_row_hf1_contractuel = row_data.r3449 + row_data.r34410 %}
                            {% set total_row_hf2_contractuel = row_data.r34411 + row_data.r34412 %}
                            {% set total_contractuel = total_row_hf1_contractuel + total_row_hf2_contractuel %}
                            {% set total_row = total_temps_complet + total_temps_non_complet + total_contractuel %}

                            <tr  id="344trCE_{{tag.refCadreEmploi.vars.value}}" lineData="1">
                                <td>
                                    {{ form_widget(tag.refCadreEmploi) }}
                                    {{ tag.refCadreEmploi.vars.data.lbCadrempl }}
                                </td>
                                <td id="r3441" data-col-group="total_row_hf1_temps_complet" style="text-align: center">{{ form_widget(tag.r3441) }}</td>
                                <td id="r3442" data-col-group="total_row_hf1_temps_complet" style="text-align: center">{{ form_widget(tag.r3442) }}</td>
                                <td class="filiTable" data-col-id="total_row_hf1_temps_complet" data-col-group="total_temps_complets" style="text-align: center">{{ total_row_hf1_temps_complet }}</td>
                                <td id="r3443" data-col-group="total_row_hf2_temps_complet" style="text-align: center">{{ form_widget(tag.r3443) }}</td>
                                <td id="r3444" data-col-group="total_row_hf2_temps_complet" style="text-align: center">{{ form_widget(tag.r3444) }}</td>
                                <td class="filiTable" data-col-id="total_row_hf2_temps_complet" data-col-group="total_temps_complets" style="text-align: center">{{ total_row_hf2_temps_complet }}</td>
                                <td class="filiTable" data-col-id="total_temps_complets" data-col-group="total_row" style="text-align: center">{{ total_temps_complet }}</td>
                                <td id="r3445" data-col-group="total_row_hf1_temps_non_complet" style="text-align: center">{{ form_widget(tag.r3445) }}</td>
                                <td id="r3446" data-col-group="total_row_hf1_temps_non_complet" style="text-align: center">{{ form_widget(tag.r3446) }}</td>
                                <td class="filiTable" data-col-id="total_row_hf1_temps_non_complet" data-col-group="total_temps_non_complets" style="text-align: center">{{ total_row_hf1_temps_non_complet }}</td>
                                <td id="r3447" data-col-group="total_row_hf2_temps_non_complet" style="text-align: center">{{ form_widget(tag.r3447) }}</td>
                                <td id="r3448" data-col-group="total_row_hf2_temps_non_complet" style="text-align: center">{{ form_widget(tag.r3448) }}</td>
                                <td class="filiTable" data-col-id="total_row_hf2_temps_non_complet" data-col-group="total_temps_non_complets" style="text-align: center">{{ total_row_hf2_temps_non_complet }}</td>
                                <td class="filiTable" data-col-id="total_temps_non_complets" data-col-group="total_row" style="text-align: center">{{ total_temps_non_complet }}</td>
                                <td id="r3449" data-col-group="total_row_hf1_contractuel" style="text-align: center">{{ form_widget(tag.r3449) }}</td>
                                <td id="r34410" data-col-group="total_row_hf1_contractuel" style="text-align: center">{{ form_widget(tag.r34410) }}</td>
                                <td class="filiTable" data-col-id="total_row_hf1_contractuel" data-col-group="total__contractuel" style="text-align: center">{{ total_row_hf1_contractuel }}</td>
                                <td id="r34411" data-col-group="total_row_hf2_contractuel" style="text-align: center">{{ form_widget(tag.r34411) }}</td>
                                <td id="r34412" data-col-group="total_row_hf2_contractuel" style="text-align: center">{{ form_widget(tag.r34412) }}</td>
                                <td class="filiTable" data-col-id="total_row_hf2_contractuel" data-col-group="total__contractuel" style="text-align: center">{{ total_row_hf2_contractuel }}</td>
                                <td class="filiTable" data-col-id="total__contractuel" data-col-group="total_row" style="text-align: center">{{ total_contractuel }}</td>
                                <td class="filiTable" data-col-id="total_row" style="text-align: center">{{ total_row }}</td>
                            </tr>

                        {% endfor %}
                        {% set total_fili = bilan_social_consolide.getIndPileForBy('ind344sTemp',['refCadreEmploi','refFiliere','idFili'],idFili) %}
                        {% set total_row_hf1_temps_complet = total_fili.r3441 + total_fili.r3442 %}
                        {% set total_row_hf2_temps_complet = total_fili.r3443 + total_fili.r3444 %}
                        {% set total_temps_complet = total_row_hf1_temps_complet + total_row_hf2_temps_complet %}
                        {% set total_row_hf1_temps_non_complet = total_fili.r3445 + total_fili.r3446 %}
                        {% set total_row_hf2_temps_non_complet = total_fili.r3447 + total_fili.r3448 %}
                        {% set total_temps_non_complet = total_row_hf1_temps_non_complet + total_row_hf2_temps_non_complet %}
                        {% set total_row_hf1_contractuel = total_fili.r3449 + total_fili.r34410 %}
                        {% set total_row_hf2_contractuel = total_fili.r34411 + total_fili.r34412 %}
                        {% set total_contractuel = total_row_hf1_contractuel + total_row_hf2_contractuel %}
                        {% set total_row = total_temps_complet + total_temps_non_complet + total_contractuel %}
                        <tr class="filiTable row_totaux" id="totalFil">
                            <td class="filiTable"><b>Total {{ tagF.lbFili}} </b></td>
                            <td id="r3441" class="filiTable" data-col-group="total_row_hf1_temps_complet" style="text-align: center">{{ total_fili.r3441 }}</td>
                            <td id="r3442" class="filiTable" data-col-group="total_row_hf1_temps_complet" style="text-align: center">{{ total_fili.r3442 }}</td>
                            <td class="filiTable" data-col-id="total_row_hf1_temps_complet" data-col-group="total_temps_complets" style="text-align: center">{{ total_row_hf1_temps_complet }}</td>
                            <td id="r3443" class="filiTable" data-col-group="total_row_hf2_temps_complet" style="text-align: center">{{ total_fili.r3443 }}</td>
                            <td id="r3444" class="filiTable" data-col-group="total_row_hf2_temps_complet" style="text-align: center">{{ total_fili.r3444 }}</td>
                            <td class="filiTable" data-col-id="total_row_hf2_temps_complet" data-col-group="total_temps_complets" style="text-align: center">{{ total_row_hf2_temps_complet }}</td>
                            <td class="filiTable" data-col-id="total_temps_complets" data-col-group="total_row" style="text-align: center">{{ total_temps_complet }}</td>
                            <td id="r3445" class="filiTable" data-col-group="total_row_hf1_temps_non_complet" style="text-align: center">{{ total_fili.r3445 }}</td>
                            <td id="r3446" class="filiTable" data-col-group="total_row_hf1_temps_non_complet" style="text-align: center">{{ total_fili.r3446 }}</td>
                            <td class="filiTable" data-col-id="total_row_hf1_temps_non_complet" data-col-group="total_temps_non_complets" style="text-align: center">{{ total_row_hf1_temps_non_complet }}</td>
                            <td id="r3447" class="filiTable" data-col-group="total_row_hf2_temps_non_complet" style="text-align: center">{{ total_fili.r3447 }}</td>
                            <td id="r3448" class="filiTable" data-col-group="total_row_hf2_temps_non_complet" style="text-align: center">{{ total_fili.r3448 }}</td>
                            <td class="filiTable" data-col-id="total_row_hf2_temps_non_complet" data-col-group="total_temps_non_complets" style="text-align: center">{{ total_row_hf2_temps_non_complet }}</td>
                            <td class="filiTable" data-col-id="total_temps_non_complets" data-col-group="total_row" style="text-align: center">{{ total_temps_non_complet }}</td>
                            <td id="r3449" class="filiTable" data-col-group="total_row_hf1_contractuel" style="text-align: center">{{ total_fili.r3449 }}</td>
                            <td id="r34410" class="filiTable" data-col-group="total_row_hf1_contractuel" style="text-align: center">{{ total_fili.r34410 }}</td>
                            <td class="filiTable" data-col-id="total_row_hf1_contractuel" data-col-group="total__contractuel" style="text-align: center">{{ total_row_hf1_contractuel }}</td>
                            <td id="r34411" class="filiTable" data-col-group="total_row_hf2_contractuel" style="text-align: center">{{ total_fili.r34411 }}</td>
                            <td id="r34412" class="filiTable" data-col-group="total_row_hf2_contractuel" style="text-align: center">{{ total_fili.r34412 }}</td>
                            <td class="filiTable" class="filiTable" data-col-id="total_row_hf2_contractuel" data-col-group="total__contractuel" style="text-align: center">{{ total_row_hf2_contractuel }}</td>
                            <td class="filiTable" data-col-id="total__contractuel" data-col-group="total_row" style="text-align: center">{{ total_contractuel }}</td>
                            <td class="filiTable" data-col-id="total_row" style="text-align: center">{{ total_row }}</td>
                        </tr>

                    {% endif %}

                {% endfor %}

                {#<tr id="totalHorsFil" class="filiTable" style="display: none">
                    <td></td>
                    <td style="text-align: center">{{totalInd344.r3441}}</td>
                    <td style="text-align: center">{{totalInd344.r3442}}</td>
                    <td style="text-align: center">{{totalInd344.r3443}}</td>
                    <td style="text-align: center">{{totalInd344.r3444}}</td>
                </tr>#}
                {% set total_all_fili = bilan_social_consolide.getIndPileForBy('ind344s',['refCadreEmploi','refFiliere','cdFili'],['AOTM','H','HH'],{'exclude':true}) %}
                {% set total_row_hf1_temps_complet = total_all_fili.r3441 + total_all_fili.r3442 %}
                {% set total_row_hf2_temps_complet = total_all_fili.r3443 + total_all_fili.r3444 %}
                {% set total_temps_complet = total_row_hf1_temps_complet + total_row_hf2_temps_complet %}
                {% set total_row_hf1_temps_non_complet = total_all_fili.r3445 + total_all_fili.r3446 %}
                {% set total_row_hf2_temps_non_complet = total_all_fili.r3447 + total_all_fili.r3448 %}
                {% set total_temps_non_complet = total_row_hf1_temps_non_complet + total_row_hf2_temps_non_complet %}
                {% set total_row_hf1_contractuel = total_all_fili.r3449 + total_all_fili.r34410 %}
                {% set total_row_hf2_contractuel = total_all_fili.r34411 + total_all_fili.r34412 %}
                {% set total_contractuel = total_row_hf1_contractuel + total_row_hf2_contractuel %}
                {% set total_row = total_temps_complet + total_temps_non_complet + total_contractuel %}
                <tr id="totalFilGlo" class="filiTable row_totaux">
                    <td class="filiTable"><b>TOUTES FILIERES</b></td>
                    <td id="r3441" class="filiTable" data-col-group="total_row_hf1_temps_complet" style="text-align: center">{{ total_all_fili.r3441 }}</td>
                    <td id="r3442" class="filiTable" data-col-group="total_row_hf1_temps_complet" style="text-align: center">{{ total_all_fili.r3442 }}</td>
                    <td class="filiTable" data-col-id="total_row_hf1_temps_complet" data-col-group="total_temps_complets" style="text-align: center">{{ total_row_hf1_temps_complet }}</td>
                    <td id="r3443" class="filiTable" data-col-group="total_row_hf2_temps_complet" style="text-align: center">{{ total_all_fili.r3443 }}</td>
                    <td id="r3444" class="filiTable" data-col-group="total_row_hf2_temps_complet" style="text-align: center">{{ total_all_fili.r3444 }}</td>
                    <td class="filiTable" data-col-id="total_row_hf2_temps_complet" data-col-group="total_temps_complets" style="text-align: center">{{ total_row_hf2_temps_complet }}</td>
                    <td class="filiTable" data-col-id="total_temps_complets" data-col-group="total_row" style="text-align: center">{{ total_temps_complet }}</td>
                    <td id="r3445" class="filiTable" data-col-group="total_row_hf1_temps_non_complet" style="text-align: center">{{ total_all_fili.r3445 }}</td>
                    <td id="r3446" class="filiTable" data-col-group="total_row_hf1_temps_non_complet" style="text-align: center">{{ total_all_fili.r3446 }}</td>
                    <td class="filiTable" data-col-id="total_row_hf1_temps_non_complet" data-col-group="total_temps_non_complets" style="text-align: center">{{ total_row_hf1_temps_non_complet }}</td>
                    <td id="r3447" class="filiTable" data-col-group="total_row_hf2_temps_non_complet" style="text-align: center">{{ total_all_fili.r3447 }}</td>
                    <td id="r3448" class="filiTable" data-col-group="total_row_hf2_temps_non_complet" style="text-align: center">{{ total_all_fili.r3448 }}</td>
                    <td class="filiTable" data-col-id="total_row_hf2_temps_non_complet" data-col-group="total_temps_non_complets" style="text-align: center">{{ total_row_hf2_temps_non_complet }}</td>
                    <td class="filiTable" data-col-id="total_temps_non_complets" data-col-group="total_row" style="text-align: center">{{ total_temps_non_complet }}</td>
                    <td id="r3449" class="filiTable" data-col-group="total_row_hf1_contractuel" style="text-align: center">{{ total_all_fili.r3449 }}</td>
                    <td id="r34410" class="filiTable" data-col-group="total_row_hf1_contractuel" style="text-align: center">{{ total_all_fili.r34410 }}</td>
                    <td class="filiTable" data-col-id="total_row_hf1_contractuel" data-col-group="total__contractuel" style="text-align: center">{{ total_row_hf1_contractuel }}</td>
                    <td id="r34411" class="filiTable" data-col-group="total_row_hf2_contractuel" style="text-align: center">{{ total_all_fili.r34411 }}</td>
                    <td id="r34412" class="filiTable" data-col-group="total_row_hf2_contractuel" style="text-align: center">{{ total_all_fili.r34412 }}</td>
                    <td class="filiTable" class="filiTable" data-col-id="total_row_hf2_contractuel" data-col-group="total__contractuel" style="text-align: center">{{ total_row_hf2_contractuel }}</td>
                    <td class="filiTable" data-col-id="total__contractuel" data-col-group="total_row" style="text-align: center">{{ total_contractuel }}</td>
                    <td class="filiTable" data-col-id="total_row" style="text-align: center">{{ total_row }}</td>
                </tr>

                {% for tag in formRemuneration344.ind344AotmsTemp %}
                    {% set row_data = tag.vars.value %}
                    {% set total_row_hf1_temps_complet = row_data.r3441 + row_data.r3442 %}
                    {% set total_row_hf2_temps_complet = row_data.r3443 + row_data.r3444 %}
                    {% set total_temps_complet = total_row_hf1_temps_complet + total_row_hf2_temps_complet %}
                    {% set total_row_hf1_temps_non_complet = row_data.r3445 + row_data.r3446 %}
                    {% set total_row_hf2_temps_non_complet = row_data.r3447 + row_data.r3448 %}
                    {% set total_temps_non_complet = total_row_hf1_temps_non_complet + total_row_hf2_temps_non_complet %}
                    {% set total_row_hf1_contractuel = row_data.r3449 + row_data.r34410 %}
                    {% set total_row_hf2_contractuel = row_data.r34411 + row_data.r34412 %}
                    {% set total_contractuel = total_row_hf1_contractuel + total_row_hf2_contractuel %}
                    {% set total_row = total_temps_complet + total_temps_non_complet + total_contractuel %}
                    <tr  id="344trCE_{{tag.refCadreEmploi.vars.value}}" lineAotm="1">
                        <td>
                            {{ form_widget(tag.refCadreEmploi) }}
                            {{ tag.refCadreEmploi.vars.data.lbCadrempl }}
                        </td>
                        <td id="r3441" data-col-group="total_row_hf1_temps_complet" style="text-align: center">{{ form_widget(tag.r3441) }}</td>
                        <td id="r3442" data-col-group="total_row_hf1_temps_complet" style="text-align: center">{{ form_widget(tag.r3442) }}</td>
                        <td class="filiTable" data-col-id="total_row_hf1_temps_complet" data-col-group="total_temps_complets" style="text-align: center">{{ total_row_hf1_temps_complet }}</td>
                        <td id="r3443" data-col-group="total_row_hf2_temps_complet" style="text-align: center">{{ form_widget(tag.r3443) }}</td>
                        <td id="r3444" data-col-group="total_row_hf2_temps_complet" style="text-align: center">{{ form_widget(tag.r3444) }}</td>
                        <td class="filiTable" data-col-id="total_row_hf2_temps_complet" data-col-group="total_temps_complets" style="text-align: center">{{ total_row_hf2_temps_complet }}</td>
                        <td class="filiTable" data-col-id="total_temps_complets" data-col-group="total_row" style="text-align: center">{{ total_temps_complet }}</td>
                        <td id="r3445" data-col-group="total_row_hf1_temps_non_complet" style="text-align: center">{{ form_widget(tag.r3445) }}</td>
                        <td id="r3446" data-col-group="total_row_hf1_temps_non_complet" style="text-align: center">{{ form_widget(tag.r3446) }}</td>
                        <td class="filiTable" data-col-id="total_row_hf1_temps_non_complet" data-col-group="total_temps_non_complets" style="text-align: center">{{ total_row_hf1_temps_non_complet }}</td>
                        <td id="r3447" data-col-group="total_row_hf2_temps_non_complet" style="text-align: center">{{ form_widget(tag.r3447) }}</td>
                        <td id="r3448" data-col-group="total_row_hf2_temps_non_complet" style="text-align: center">{{ form_widget(tag.r3448) }}</td>
                        <td class="filiTable" data-col-id="total_row_hf2_temps_non_complet" data-col-group="total_temps_non_complets" style="text-align: center">{{ total_row_hf2_temps_non_complet }}</td>
                        <td class="filiTable" data-col-id="total_temps_non_complets" data-col-group="total_row" style="text-align: center">{{ total_temps_non_complet }}</td>
                        <td id="r3449" data-col-group="total_row_hf1_contractuel" style="text-align: center">{{ form_widget(tag.r3449) }}</td>
                        <td id="r34410" data-col-group="total_row_hf1_contractuel" style="text-align: center">{{ form_widget(tag.r34410) }}</td>
                        <td class="filiTable" data-col-id="total_row_hf1_contractuel" data-col-group="total__contractuel" style="text-align: center">{{ total_row_hf1_contractuel }}</td>
                        <td id="r34411" data-col-group="total_row_hf2_contractuel" style="text-align: center">{{ form_widget(tag.r34411) }}</td>
                        <td id="r34412" data-col-group="total_row_hf2_contractuel" style="text-align: center">{{ form_widget(tag.r34412) }}</td>
                        <td class="filiTable" data-col-id="total_row_hf2_contractuel" data-col-group="total__contractuel" style="text-align: center">{{ total_row_hf2_contractuel }}</td>
                        <td class="filiTable" data-col-id="total__contractuel" data-col-group="total_row" style="text-align: center">{{ total_contractuel }}</td>
                        <td class="filiTable" data-col-id="total_row" style="text-align: center">{{ total_row }}</td>
                    </tr>

                {% endfor %}
                {% set total_ind = bilan_social_consolide.getIndPileForBy('ind344s',['refCadreEmploi','refFiliere','cdFili'],['H','HH'],{'exclude':true}) %}
                {% set total_row_hf1_temps_complet = total_ind.r3441 + total_ind.r3442 %}
                {% set total_row_hf2_temps_complet = total_ind.r3443 + total_ind.r3444 %}
                {% set total_temps_complet = total_row_hf1_temps_complet + total_row_hf2_temps_complet %}
                {% set total_row_hf1_temps_non_complet = total_ind.r3445 + total_ind.r3446 %}
                {% set total_row_hf2_temps_non_complet = total_ind.r3447 + total_ind.r3448 %}
                {% set total_temps_non_complet = total_row_hf1_temps_non_complet + total_row_hf2_temps_non_complet %}
                {% set total_row_hf1_contractuel = total_ind.r3449 + total_ind.r34410 %}
                {% set total_row_hf2_contractuel = total_ind.r34411 + total_ind.r34412 %}
                {% set total_contractuel = total_row_hf1_contractuel + total_row_hf2_contractuel %}
                {% set total_row = total_temps_complet + total_temps_non_complet + total_contractuel %}
                <tr id="totalGlo" class="filiTable row_totaux">
                    <td><b>TOTAL</b></td>
                    <td id="r3441" class="filiTable" data-col-group="total_row_hf1_temps_complet" style="text-align: center">{{ total_ind.r3441 }}</td>
                    <td id="r3442" class="filiTable" data-col-group="total_row_hf1_temps_complet" style="text-align: center">{{ total_ind.r3442 }}</td>
                    <td class="filiTable" data-col-id="total_row_hf1_temps_complet" data-col-group="total_temps_complets" style="text-align: center">{{ total_row_hf1_temps_complet }}</td>
                    <td id="r3443" class="filiTable" data-col-group="total_row_hf2_temps_complet" style="text-align: center">{{ total_ind.r3443 }}</td>
                    <td id="r3444" class="filiTable" data-col-group="total_row_hf2_temps_complet" style="text-align: center">{{ total_ind.r3444 }}</td>
                    <td class="filiTable" data-col-id="total_row_hf2_temps_complet" data-col-group="total_temps_complets" style="text-align: center">{{ total_row_hf2_temps_complet }}</td>
                    <td class="filiTable" data-col-id="total_temps_complets" data-col-group="total_row" style="text-align: center">{{ total_temps_complet }}</td>
                    <td id="r3445" class="filiTable" data-col-group="total_row_hf1_temps_non_complet" style="text-align: center">{{ total_ind.r3445 }}</td>
                    <td id="r3446" class="filiTable" data-col-group="total_row_hf1_temps_non_complet" style="text-align: center">{{ total_ind.r3446 }}</td>
                    <td class="filiTable" data-col-id="total_row_hf1_temps_non_complet" data-col-group="total_temps_non_complets" style="text-align: center">{{ total_row_hf1_temps_non_complet }}</td>
                    <td id="r3447" class="filiTable" data-col-group="total_row_hf2_temps_non_complet" style="text-align: center">{{ total_ind.r3447 }}</td>
                    <td id="r3448" class="filiTable" data-col-group="total_row_hf2_temps_non_complet" style="text-align: center">{{ total_ind.r3448 }}</td>
                    <td class="filiTable" data-col-id="total_row_hf2_temps_non_complet" data-col-group="total_temps_non_complets" style="text-align: center">{{ total_row_hf2_temps_non_complet }}</td>
                    <td class="filiTable" data-col-id="total_temps_non_complets" data-col-group="total_row" style="text-align: center">{{ total_temps_non_complet }}</td>
                    <td id="r3449" class="filiTable" data-col-group="total_row_hf1_contractuel" style="text-align: center">{{ total_ind.r3449 }}</td>
                    <td id="r34410" class="filiTable" data-col-group="total_row_hf1_contractuel" style="text-align: center">{{ total_ind.r34410 }}</td>
                    <td class="filiTable" data-col-id="total_row_hf1_contractuel" data-col-group="total__contractuel" style="text-align: center">{{ total_row_hf1_contractuel }}</td>
                    <td id="r34411" class="filiTable" data-col-group="total_row_hf2_contractuel" style="text-align: center">{{ total_ind.r34411 }}</td>
                    <td id="r34412" class="filiTable" data-col-group="total_row_hf2_contractuel" style="text-align: center">{{ total_ind.r34412 }}</td>
                    <td class="filiTable" class="filiTable" data-col-id="total_row_hf2_contractuel" data-col-group="total__contractuel" style="text-align: center">{{ total_row_hf2_contractuel }}</td>
                    <td class="filiTable" data-col-id="total__contractuel" data-col-group="total_row" style="text-align: center">{{ total_contractuel }}</td>
                    <td class="filiTable" data-col-id="total_row" style="text-align: center">{{ total_row }}</td>
                </tr>

                </tbody>
            </table>
        </div>

        <br/>

        <input class="btn button-tableau pull-right" type="submit" value="Enregistrer et valider les contrôles de cohérence" name="valider" onclick="recordAuto = false;
                $('#progImg').show();" data-valide="1" />

        <img id="progImg" src="{{ asset("img/progress.gif") }}" style="display:none"/>

        {{ form_end(formRemuneration344) }}

        <script type="text/javascript">
            $(document).ready(function ()
            {
                changeDetect = false;
                {% include 'stickyheader.txt' %}
                getBrowserSetSticky(ind344Table);

                function initForm344() {
                    var q344Res = $('input[name="bscForm344[q344]"]').filter(':checked').val();

                    if (q344Res == "1") {
                        $('#ind344b').show();
                    } else {
                        $('#ind344b').hide();
                    }
                }
                initForm344();
                $("#bscForm344_q344").on("click", function () {
                    initForm344();
                });

                $(document).change();
                //update344(true);

            });


            function initLight344() {
                if (incoherenceList != undefined) {
                    // Si le json js a été chargé  (via un eneregistrement) => light via le json
                    for (var idx in incoherenceList) {
                        var incoh = incoherenceList[idx];
                        if (incoh.tableNum == '3.4.3') {
                            lightError(incoh.field, incoh.incoherence);
                        }
                    }
                } else {
                    // si premier acces à la page => light via le twig

                    {% for tag in incoherenceList %}
                    {% if tag.tableNum == '3.4.3' %}
                    lightError('{{tag.field}}', {{tag.blIncoherence}});
                    {% endif %}
                    {% endfor %}

                }
            }

            function forceQ344ToYes() {
                $('#bscForm344_q344_0').attr('checked', 'checked');
                $('#bscForm344_q344_1').removeAttr('checked');
                $('#ind344b').show();
            }


            /*
             * METHODES Tableau 3.4.4
             */

            function toggleFiliere344(toggleObj, pidFili) {
                var css = toggleObj.getAttribute('class');
                {% if idFili != null and idFili != 0 %}
                // Sauvegarde auto
                if (currentTab != "")
                    saveTab(currentTab);
                {% endif %}

                if (css == "buttonplus") {
                    $('#ind344').load('{{ path('bilan_conso_remuneration_ind344_edit') }}?idFili=' + pidFili, function () {
                        initLight344();
                        forceQ344ToYes();
                        disabled();
                    });

                } else {
                    $('#ind344').load('{{ path('bilan_conso_remuneration_ind344_edit') }}?idFili=' + 0, function () {
                        initLight344();
                        forceQ344ToYes();
                        disabled();
                    });

                }
            }

            function changedR344(obj) {
                //update344(false);
            }


            function update344(onInit) {
                var table344 = document.getElementById('ind344Table');

                var rowLength344 = table344.rows.length;
                var idxRowInput = 0;
                var idxRowInputAotm = 0;

                var mtTot1 = 0;
                var mtTot2 = 0;
                var mtTot3 = 0;
                var mtTot4 = 0;
                var mtTot5 = 0;
                var mtTot6 = 0;
                var mtTot7 = 0;
                var mtTot8 = 0;
                var mtTot9 = 0;
                var mtTot10 = 0;
                var mtTot11 = 0;
                var mtTot12 = 0;

                var mtTot1Fil = 0;
                var mtTot2Fil = 0;
                var mtTot3Fil = 0;
                var mtTot4Fil = 0;
                var mtTot5Fil = 0;
                var mtTot6Fil = 0;
                var mtTot7Fil = 0;
                var mtTot8Fil = 0;
                var mtTot9Fil = 0;
                var mtTot10Fil = 0;
                var mtTot11Fil = 0;
                var mtTot12Fil = 0;

                var mtTot1FilGlo = 0;
                var mtTot2FilGlo = 0;
                var mtTot3FilGlo = 0;
                var mtTot4FilGlo = 0;
                var mtTot5FilGlo = 0;
                var mtTot6FilGlo = 0;
                var mtTot7FilGlo = 0;
                var mtTot8FilGlo = 0;
                var mtTot9FilGlo = 0;
                var mtTot10FilGlo = 0;
                var mtTot11FilGlo = 0;
                var mtTot12FilGlo = 0;

                var mtTot1HorsFil = 0;
                var mtTot2HorsFil = 0;
                var mtTot3HorsFil = 0;
                var mtTot4HorsFil = 0;
                var mtTot5HorsFil = 0;
                var mtTot6HorsFil = 0;
                var mtTot7HorsFil = 0;
                var mtTot8HorsFil = 0;
                var mtTot9HorsFil = 0;
                var mtTot10HorsFil = 0;
                var mtTot11HorsFil = 0;
                var mtTot12HorsFil = 0;
                var mtTot1Glo = 0;
                var mtTot2Glo = 0;
                var mtTot3Glo = 0;
                var mtTot4Glo = 0;
                var mtTot5Glo = 0;
                var mtTot6Glo = 0;
                var mtTot7Glo = 0;
                var mtTot8Glo = 0;
                var mtTot9Glo = 0;
                var mtTot10Glo = 0;
                var mtTot11Glo = 0;
                var mtTot12Glo = 0;

                for (var i = 0; i < rowLength344; i += 1) {
                    var row = table344.rows[i];

                    if(row.getAttribute("entete") != undefined && row.getAttribute("entete") == "1") {
                        continue;
                    }

                    var lineAotm = false;
                    var lineData = false;

                    if(row.getAttribute("lineAotm") != undefined) {
                        lineAotm = true;
                    }
                    if(row.getAttribute("lineData") != undefined) {
                        lineData = true;
                    }

                    var cellLength = row.cells.length;

                    var lineTotalFil = false;
                    var lineTotalFilGlo = false;

                    if (row.id.substring(0, 8) == "entetFil") {
                        continue;
                    }

                    if (row.id.substring(0, 18) == "totalHorsFil") {
                        for (var y = 0; y < cellLength; y += 1) {
                            var cell = row.cells[y];
                            if (y == 1) {
                                mtTot1HorsFil = roundStep(cell.innerHTML);
                            } else if (y == 2) {
                                mtTot2HorsFil = roundStep(cell.innerHTML);
                            } else if (y == 3) {
                                mtTot3HorsFil = roundStep(cell.innerHTML);
                            } else if (y == 4) {
                                mtTot4HorsFil = roundStep(cell.innerHTML);
                            } else if (y == 5) {
                                mtTot5HorsFil = roundStep(cell.innerHTML);
                            } else if (y == 6) {
                                mtTot6HorsFil = roundStep(cell.innerHTML);
                            } else if (y == 7) {
                                mtTot7HorsFil = roundStep(cell.innerHTML);
                            } else if (y == 8) {
                                mtTot8HorsFil = roundStep(cell.innerHTML);
                            } else if (y == 9) {
                                mtTot9HorsFil = roundStep(cell.innerHTML);
                            } else if (y == 10) {
                                mtTot10HorsFil = roundStep(cell.innerHTML);
                            } else if (y == 11) {
                                mtTot11HorsFil = roundStep(cell.innerHTML);
                            } else if (y == 12) {
                                mtTot12HorsFil = roundStep(cell.innerHTML);
                            }
                        }
                    }

                    if (row.id.substring(0, 11) == "totalFilGlo") {
                        lineTotalFilGlo = true;
                        for (var y = 0; y < cellLength; y += 1) {
                            var cell = row.cells[y];
                            if (y == 1) {
                                cell.innerHTML = (mtTot1FilGlo + mtTot1HorsFil).toFixed(2);
                                mtTot1FilGlo = 0;
                            } else if (y == 2) {
                                cell.innerHTML = (mtTot2FilGlo + mtTot2HorsFil).toFixed(2);
                                mtTot2FilGlo = 0;
                            } else if (y == 3) {
                                cell.innerHTML = (mtTot3FilGlo + mtTot3HorsFil).toFixed(2);
                                mtTot3FilGlo = 0;
                            } else if (y == 4) {
                                cell.innerHTML = (mtTot4FilGlo + mtTot4HorsFil).toFixed(2);
                                mtTot4FilGlo = 0;
                            } else if (y == 5) {
                                cell.innerHTML = (mtTot5FilGlo + mtTot5HorsFil).toFixed(2);
                                mtTot5FilGlo = 0;
                            } else if (y == 6) {
                                cell.innerHTML = (mtTot6FilGlo + mtTot6HorsFil).toFixed(2);
                                mtTot6FilGlo = 0;
                            } else if (y == 7) {
                                cell.innerHTML = (mtTot7FilGlo + mtTot7HorsFil).toFixed(2);
                                mtTot7FilGlo = 0;
                            } else if (y == 8) {
                                cell.innerHTML = (mtTot8FilGlo + mtTot8HorsFil).toFixed(2);
                                mtTot8FilGlo = 0;
                            } else if (y == 9) {
                                cell.innerHTML = (mtTot9FilGlo + mtTot9HorsFil).toFixed(2);
                                mtTot9FilGlo = 0;
                            } else if (y == 10) {
                                cell.innerHTML = (mtTot10FilGlo + mtTot10HorsFil).toFixed(2);
                                mtTot10FilGlo = 0;
                            } else if (y == 11) {
                                cell.innerHTML = (mtTot11FilGlo + mtTot11HorsFil).toFixed(2);
                                mtTot11FilGlo = 0;
                            } else if (y == 12) {
                                cell.innerHTML = (mtTot12FilGlo + mtTot12HorsFil).toFixed(2);
                                mtTot12FilGlo = 0;
                            }
                        }
                    } else if (row.id.substring(0, 8) == "totalFil") {
                        lineTotalFil = true;
                        for (var y = 0; y < cellLength; y += 1) {
                            var cell = row.cells[y];
                            if (y == 1) {
                                cell.innerHTML = mtTot1Fil.toFixed(2);
                                mtTot1Fil = 0;
                            } else if (y == 2) {
                                cell.innerHTML = mtTot2Fil.toFixed(2);
                                mtTot2Fil = 0;
                            } else if (y == 3) {
                                cell.innerHTML = mtTot3Fil.toFixed(2);
                                mtTot3Fil = 0;
                            } else if (y == 4) {
                                cell.innerHTML = mtTot4Fil.toFixed(2);
                                mtTot4Fil = 0;
                            } else if (y == 5) {
                                cell.innerHTML = mtTot5Fil.toFixed(2);
                                mtTot5Fil = 0;
                            } else if (y == 6) {
                                cell.innerHTML = mtTot6Fil.toFixed(2);
                                mtTot6Fil = 0;
                            } else if (y == 7) {
                                cell.innerHTML = mtTot7Fil.toFixed(2);
                                mtTot7Fil = 0;
                            } else if (y == 8) {
                                cell.innerHTML = mtTot8Fil.toFixed(2);
                                mtTot8Fil = 0;
                            } else if (y == 9) {
                                cell.innerHTML = mtTot9Fil.toFixed(2);
                                mtTot9Fil = 0;
                            } else if (y == 10) {
                                cell.innerHTML = mtTot10Fil.toFixed(2);
                                mtTot10Fil = 0;
                            } else if (y == 11) {
                                cell.innerHTML = mtTot11Fil.toFixed(2);
                                mtTot11Fil = 0;
                            } else if (y == 12) {
                                cell.innerHTML = mtTot12Fil.toFixed(2);
                                mtTot12Fil = 0;
                            }
                        }
                    }

                    if (row.id.substring(0, ) == "totalGlo") {
                        for (var y = 0; y < cellLength; y += 1) {
                            var cell = row.cells[y];
                            if (y == 1) {
                                cell.innerHTML = (mtTot1Glo + mtTot1HorsFil).toFixed(2);
                                mtTot1Glo = 0;
                            } else if (y == 2) {
                                cell.innerHTML = (mtTot2Glo + mtTot2HorsFil).toFixed(2);
                                mtTot2Glo = 0;
                            } else if (y == 3) {
                                cell.innerHTML = (mtTot3Glo + mtTot3HorsFil).toFixed(2);
                                mtTot3Glo = 0;
                            } else if (y == 4) {
                                cell.innerHTML = (mtTot4Glo + mtTot4HorsFil).toFixed(2);
                                mtTot4Glo = 0;
                            } else if (y == 5) {
                                cell.innerHTML = (mtTot5Glo + mtTot5HorsFil).toFixed(2);
                                mtTot5Glo = 0;
                            } else if (y == 6) {
                                cell.innerHTML = (mtTot6Glo + mtTot6HorsFil).toFixed(2);
                                mtTot6Glo = 0;
                            } else if (y == 7) {
                                cell.innerHTML = (mtTot7Glo + mtTot7HorsFil).toFixed(2);
                                mtTot7Glo = 0;
                            } else if (y == 8) {
                                cell.innerHTML = (mtTot8Glo + mtTot8HorsFil).toFixed(2);
                                mtTot8Glo = 0;
                            } else if (y == 9) {
                                cell.innerHTML = (mtTot9Glo + mtTot9HorsFil).toFixed(2);
                                mtTot9Glo = 0;
                            } else if (y == 10) {
                                cell.innerHTML = (mtTot10Glo + mtTot10HorsFil).toFixed(2);
                                mtTot10Glo = 0;
                            } else if (y == 11) {
                                cell.innerHTML = (mtTot11Glo + mtTot11HorsFil).toFixed(2);
                                mtTot11Glo = 0;
                            } else if (y == 12) {
                                cell.innerHTML = (mtTot12Glo + mtTot12HorsFil).toFixed(2);
                                mtTot12Glo = 0;
                            }
                        }
                    }

                    for (var y = 0; y < cellLength; y += 1) {
                        var cell = row.cells[y];
                        var cellValue;

                        if (cell.id.substring(0, 5) == "r3442") {
                            cellValue = $('#bscForm344_ind344' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r3442').val();
                            if (cellValue != "") {
                                cellValue = parseInt(cellValue);

                                if(!lineAotm) {
                                    mtTot2 += cellValue;
                                    mtTot2Fil += cellValue;
                                    mtTot2FilGlo += cellValue;
                                }
                                mtTot2Glo += cellValue;
                            }
                            //if ($('#bscForm344_ind344sTemp_' + idxRowInput + '_r3442').val() != "") {
                            //    mtTot2 += roundStep($('#bscForm344_ind344sTemp_' + idxRowInput + '_r3442').val(), 0.01);
                            //    mtTot2Fil += roundStep($('#bscForm344_ind344sTemp_' + idxRowInput + '_r3442').val(), 0.01);
                            //    mtTot2FilGlo += roundStep($('#bscForm344_ind344sTemp_' + idxRowInput + '_r3442').val(), 0.01);
                            //}
                        } else if (cell.id.substring(0, 5) == "r3443") {
                            cellValue = $('#bscForm344_ind344' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r3443').val();
                            if (cellValue != "") {
                                cellValue = parseInt(cellValue);

                                if(!lineAotm) {
                                    mtTot3 += cellValue;
                                    mtTot3Fil += cellValue;
                                    mtTot3FilGlo += cellValue;
                                }
                                mtTot3Glo += cellValue;
                            }
                        } else if (cell.id.substring(0, 5) == "r3444") {
                            cellValue = $('#bscForm344_ind344' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r3444').val();
                            if (cellValue != "") {
                                cellValue = parseInt(cellValue);

                                if(!lineAotm) {
                                    mtTot4 += cellValue;
                                    mtTot4Fil += cellValue;
                                    mtTot4FilGlo += cellValue;
                                }
                                mtTot4Glo += cellValue;
                            }
                        } else if (cell.id.substring(0, 5) == "r3445") {
                            cellValue = $('#bscForm344_ind344' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r3445').val();
                            if (cellValue != "") {
                                cellValue = parseInt(cellValue);

                                if(!lineAotm) {
                                    mtTot5 += cellValue;
                                    mtTot5Fil += cellValue;
                                    mtTot5FilGlo += cellValue;
                                }
                                mtTot5Glo += cellValue;
                            }
                        } else if (cell.id.substring(0, 5) == "r3446") {
                            cellValue = $('#bscForm344_ind344' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r3446').val();
                            if (cellValue != "") {
                                cellValue = parseInt(cellValue);

                                if(!lineAotm) {
                                    mtTot6 += cellValue;
                                    mtTot6Fil += cellValue;
                                    mtTot6FilGlo += cellValue;
                                }
                                mtTot6Glo += cellValue;
                            }
                        } else if (cell.id.substring(0, 5) == "r3447") {
                            cellValue = $('#bscForm344_ind344' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r3447').val();
                            if (cellValue != "") {
                                cellValue = parseInt(cellValue);

                                if(!lineAotm) {
                                    mtTot7 += cellValue;
                                    mtTot7Fil += cellValue;
                                    mtTot7FilGlo += cellValue;
                                }
                                mtTot7Glo += cellValue;
                            }
                        } else if (cell.id.substring(0, 5) == "r3448") {
                            cellValue = $('#bscForm344_ind344' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r3448').val();
                            if (cellValue != "") {
                                cellValue = parseInt(cellValue);

                                if(!lineAotm) {
                                    mtTot8 += cellValue;
                                    mtTot8Fil += cellValue;
                                    mtTot8FilGlo += cellValue;
                                }
                                mtTot8Glo += cellValue;
                            }
                        } else if (cell.id.substring(0, 5) == "r3449") {
                            cellValue = $('#bscForm344_ind344' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r3449').val();
                            if (cellValue != "") {
                                cellValue = parseInt(cellValue);

                                if(!lineAotm) {
                                    mtTot9 += cellValue;
                                    mtTot9Fil += cellValue;
                                    mtTot9FilGlo += cellValue;
                                }
                                mtTot9Glo += cellValue;
                            }
                        } else if (cell.id.substring(0, 6) == "r34410") {
                            cellValue = $('#bscForm344_ind344' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r34410').val();
                            if (cellValue != "") {
                                cellValue = parseInt(cellValue);

                                if(!lineAotm) {
                                    mtTot10 += cellValue;
                                    mtTot10Fil += cellValue;
                                    mtTot10FilGlo += cellValue;
                                }
                                mtTot10Glo += cellValue;
                            }
                        } else if (cell.id.substring(0, 6) == "r34411") {
                            cellValue = $('#bscForm344_ind344' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r34411').val();
                            if (cellValue != "") {
                                cellValue = parseInt(cellValue);

                                if(!lineAotm) {
                                    mtTot11 += cellValue;
                                    mtTot11Fil += cellValue;
                                    mtTot11FilGlo += cellValue;
                                }
                                mtTot11Glo += cellValue;
                            }
                        } else if (cell.id.substring(0, 6) == "r34412") {
                            cellValue = $('#bscForm344_ind344' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r34412').val();
                            if (cellValue != "") {
                                cellValue = parseInt(cellValue);

                                if(!lineAotm) {
                                    mtTot12 += cellValue;
                                    mtTot12Fil += cellValue;
                                    mtTot12FilGlo += cellValue;
                                }
                                mtTot12Glo += cellValue;
                            }
                        } else if (cell.id.substring(0, 5) == "r3441") {
                            cellValue = $('#bscForm344_ind344' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r3441').val();
                            if (cellValue != "") {
                                cellValue = parseInt(cellValue);

                                if(!lineAotm) {
                                    mtTot1 += cellValue;
                                    mtTot1Fil += cellValue;
                                    mtTot1FilGlo += cellValue;
                                }
                                mtTot1Glo += cellValue;
                            }
                        }
                    }

                    if (lineData) idxRowInput++;
                    if (lineAotm) idxRowInputAotm++;

                }// end for line

            }


            /*
             * METHODE AJAX SUBMIT
             */
            $(function () {
                // Enregistrement en ajax
                $('form').on('submit', function (e) {
                    var $this = $(this).closest('div');
                    var btn = $(this).find("input[type=submit]:focus");
                    var qRes344 = $('input[name="bscForm344[q344]"]').filter(':checked').val();
                    var Res344Status = checkIfZeroOrNull(qRes344, 'ind344Table', 'ind344b');
                    var value_valide = $(btn).data('valide');
                    $('#bscForm344_valide').val(value_valide);
                    // Submit en ajax pour le fonctionnement d'appel par onglet
                    e.preventDefault();

                    if (Res344Status == true) {
                        $.ajax({
                            type: 'post',
                            url: '{{ path('bilan_conso_remuneration_ind344_edit') }}?idFili={{idFili}}',
                            data: $('form').serialize(),
                            success: function (responsejson) {

                                if (responsejson.data == 1) {
                                    if (recordAuto) {
                                        $('#progImg').hide();
                                        $('#messageJS').html("Enregistrement automatique réussi");
                                        messageJS.dialog("open");
                                        setIncoherenceTable(responsejson);
                                    } else {
                                        $('#ind344').load('{{ path('bilan_conso_remuneration_ind344_edit') }}?idFili={{idFili}}', function () {
                                            $('#progImg').hide();
                                            $('#messageJS').html("Enregistrement réussi");
                                            messageJS.dialog("open");
                                            setIncoherenceTable(responsejson);

                                            var next = $($this).next('.panel-heading');
                                            if(next.length == 0) {
                                                window.location.href = '{{ path('bilan_conso_conditions_edit') }}';
                                            }
                                        });
                                    }
                                } else if (responsejson.data == "-3") {
                                    $('#progImg').hide();
                                    $('#messageJS').html("{{'erreur.unique.violation'|trans}}");
                                    messageJS.dialog("open");
                                } else {
                                    $('#progImg').hide();
                                    $('#messageJS').html("Une erreur s'est produite dans l'enregistrement 1");
                                    messageJS.dialog("open");
                                }

                            },
                            error: function (xhr, status, error) {
                                alert(xhr);
                                alert(status);
                                alert(error);

                                $('#progImg').hide();
                                $('#messageJS').html("Une erreur s'est produite dans l'enregistrement 2 ");
                                messageJS.dialog("open");
                            }

                        });
                    } else {
                        $('#progImg').hide();
                    }

                });

            });

        </script>
    {% endif %}
