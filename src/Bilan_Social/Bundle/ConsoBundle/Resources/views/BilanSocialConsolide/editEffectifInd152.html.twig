<link rel="stylesheet" type="text/css" href="{{ asset('css/jquery.steps.css') }}" />
<link rel="stylesheet" type="text/css" href="{{ asset('node_modules/bootstrap/dist/css/bootstrap.min.css') }}" />
<link rel="stylesheet" type="text/css" href="{{ asset('node_modules/jquery-ui-dist/jquery-ui.theme.min.css') }}" />
<link rel="stylesheet" type="text/css" href="{{ asset("css/main.css") }}" />
<link rel="stylesheet" type="text/css" href="{{ asset("css/stickysort.css") }}" />
<link rel="stylesheet" type="text/css" href="{{ asset('node_modules/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css') }}" />

<script type="text/javascript" src="{{ asset('node_modules/jquery/dist/jquery.min.js') }}" ></script>
<script type="text/javascript" src="{{ asset('node_modules/bootstrap/dist/js/bootstrap.min.js') }}" ></script>
<script type="text/javascript" src="{{ asset('node_modules/jquery-steps/build/jquery.steps.min.js') }}" ></script>
<script type="text/javascript" src="{{ asset('node_modules/jquery-ui-dist/jquery-ui.min.js') }}" ></script>
<script type="text/javascript" src="{{ asset('js/main.js') }}"></script>

{% if formEffectif152 is defined %}
    {% set bilan_social_consolide = formEffectif152.vars.data %}
    {{ form_start(formEffectif152) }}

    <h5>
        Champ : le tableau qui suit concerne les agents titulaires et stagiaires occupant un emploi permanent.<br/>
        Remarque importante : les agents recrutés sur des emplois fonctionnels doivent être uniquement comptabilisés dans leurs cadres d'emplois d'origine.
    </h5>

    <table width="100%" id="ind152Table" class="table table-striped table-hover table-bordered">
        <thead>
        <tr entete="1">
            <th width="20%" rowspan="4">Recrutement</th>
            <th colspan="17" style="text-align: center">Fonctionnaires</th>
            <th rowspan="5" style="text-align: center" class="filiTable">Total</th>
            <th colspan="6" style="text-align: center">Fonctionnaires</th>
            <th rowspan="5" style="text-align: center" class="filiTable">Total temps complet + non complet</th>
        </tr>
        <tr entete="1">
            <th colspan="9" style="text-align: center">Par</th>
            <th colspan="4" style="text-align: center">Par voie de détachement d'agents :</th>
            <th colspan="4" style="text-align: center">Par</th>
            <th colspan="6" style="text-align: center">Recrutements</th>
        </tr>

        <tr entete="1">
            <th colspan="3" style="text-align: center">Recrutement direct</th>
            <th colspan="3" style="text-align: center">Voie de concours, Sélection pro, Examen pro</th>
            <th rowspan="2" style="text-align: center">Article 38</th>
            <th rowspan="2" style="text-align: center">Intégration directe</th>
            <th rowspan="2" style="text-align: center">Voie de mutation</th>
            <th rowspan="2" style="text-align: center">de la FPE</th>
            <th rowspan="2" style="text-align: center">de la FPH</th>
            <th rowspan="2" style="text-align: center">d'autres collectivités territoriales</th>
            <th rowspan="2" style="text-align: center">d'autres organismes (par ex.: FPEUE)</th>
            <th rowspan="2" style="text-align: center">Transfert de compétence</th>
            <th colspan="2" style="text-align: center">Réintégration agents non rémunérés pendant la période d'absence</th>
            <th rowspan="2" style="text-align: center">Retours d'agents en positions particulières ayant été rémunérés pendant la période d'absence</th>
            <th colspan="3" style="text-align: center">Temps complet</th>
            <th colspan="3" style="text-align: center">Temps non complet</th>
        </tr>

        <tr entete="1">
            <th style="text-align: center">Nouvel arrivant dans la collectivité</th>
{#            <th style="text-align: center">Dont PACTE</th>#}
            <th style="text-align: center">Agent déjà présent en 2019 en tant que contractuel permanent</th>
{#            <th style="text-align: center">dont PACTE</th>#}
            <th style="text-align: center">Agent déjà présent en tant que contractuel non permanent</th>
            <th style="text-align: center">Lauréat nouvel arrivant dans la collectivité</th>
            <th style="text-align: center">Lauréat déjà présent en tant que contractuel permanent</th>
            <th style="text-align: center">Lauréat déjà présent en tant que contractuel non permanent</th>
            <th style="text-align: center">retour de disponibilité</th>
            <th style="text-align: center">autres cas</th>
            <th style="text-align: center">Hommes</th>
            <th style="text-align: center">Femmes</th>
            <th rowspan="2" style="text-align: center" class="filiTable">Total Temps complet</th>
            <th style="text-align: center">Hommes</th>
            <th style="text-align: center">Femmes</th>
            <th rowspan="2" style="text-align: center" class="filiTable">Total Temps non complet</th>
        </tr>

        <tr entete="1">
            <th style="text-align: center">Cadres d'emploi</th>
            <th style="text-align: center">1.5.2<br/>(1)</th>
            <th style="text-align: center">1.5.2<br/>(2)</th>
            <th style="text-align: center">1.5.2<br/>(3)</th>
            <th style="text-align: center">1.5.2<br/>(4)</th>
            <th style="text-align: center">1.5.2<br/>(5)</th>
            <th style="text-align: center">1.5.2<br/>(6)</th>
            <th style="text-align: center">1.5.2<br/>(7)</th>
            <th style="text-align: center">1.5.2<br/>(8)</th>
            <th style="text-align: center">1.5.2<br/>(9)</th>
            <th style="text-align: center">1.5.2<br/>(10)</th>
            <th style="text-align: center">1.5.2<br/>(11)</th>
            <th style="text-align: center">1.5.2<br/>(12)</th>
            <th style="text-align: center">1.5.2<br/>(13)</th>
            <th style="text-align: center">1.5.2<br/>(14)</th>
            <th style="text-align: center">1.5.2<br/>(15)</th>
            <th style="text-align: center">1.5.2<br/>(16)</th>
            <th style="text-align: center">1.5.2<br/>(17)</th>
            <th style="text-align: center">1.5.2<br/>(18)</th>
            <th style="text-align: center">1.5.2<br/>(19)</th>
            <th style="text-align: center">1.5.2<br/>(20)</th>
            <th style="text-align: center">1.5.2<br/>(21)</th>
        </tr>
        </thead>
        <tbody id="152tbody" class="ind_table_totaux">
        {% for tagF in filieres %}

            <tr id="entetFil" hide="1" idFili="{{ tagF.idFili }}" style="text-align: center">
                <td colspan="26">
                    &nbsp;&nbsp;&nbsp;&nbsp;{{ tagF.lbFili }}
                    {% for key,tot in arrayTotalFiliere %}
                        {% if(key == tagF.idFili) %}
                            <span class="alerteConso">[{% if(tot) == null %} 0 {% else %} {{ tot }} {% endif %}]</span>
                        {% endif %}
                    {% endfor %}
                    {% if idFili == tagF.idFili %}
                        <input class="buttonmoins" type="button" id="toggle152_{{ tagF.idFili }}"
                               onclick="toggleFiliere152(this, {{ tagF.idFili }})">
                    {% endif %}

                    {% if idFili != tagF.idFili %}
                        <input class="buttonplus" type="button" id="toggle152_{{ tagF.idFili }}"
                               onclick="toggleFiliere152(this, {{ tagF.idFili }})">
                    {% endif %}
                </td>
            </tr>

            {% if idFili == tagF.idFili %}
                {% for tag in formEffectif152.ind152sTemp %}
                    {% set row_data = tag.vars.value %}
                    {% set total_row_type_recrutement = row_data.r1521 + row_data.r1522 + row_data.r1523 + row_data.r1524 + row_data.r1525 + row_data.r1526 + row_data.r1527 + row_data.r1528 + row_data.r1529 + row_data.r15210 + row_data.r15211 + row_data.r15212 + row_data.r15213 + row_data.r15214 + row_data.r15215 + row_data.r15216 + row_data.r15217 %}
                    {% set total_row_hf_temps_complet = row_data.r15218 + row_data.r15219 %}
                    {% set total_row_hf_temps_non_complet = row_data.r15220 + row_data.r15221 %}
                    {% set total_row_hf = total_row_hf_temps_complet + total_row_hf_temps_non_complet %}
                    <tr id="152trCE_{{ tag.refCadreEmploi.vars.value }}" lineData="1">
                        <td>
                            {{ form_widget(tag.refCadreEmploi) }}
                            {{ tag.refCadreEmploi.vars.data.lbCadrempl }}
                        </td>
                        <td id="r1521" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r1521) }}</td>
                        <td id="r1522" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r1522) }}</td>
                        <td id="r1523" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r1523) }}</td>
                        <td id="r1524" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r1524) }}</td>
                        <td id="r1525" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r1525) }}</td>
                        <td id="r1526" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r1526) }}</td>
                        <td id="r1527" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r1527) }}</td>
                        <td id="r1528" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r1528) }}</td>
                        <td id="r1529" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r1529) }}</td>
                        <td id="r15210" style="text-align: center;min-width: 50px;" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r15210) }}</td>
                        <td id="r15211" style="text-align: center;min-width: 50px;" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r15211) }}</td>
                        <td id="r15212" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r15212) }}</td>
                        <td id="r15213" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r15213) }}</td>
                        <td id="r15214" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r15214) }}</td>
                        <td id="r15215" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r15215) }}</td>
                        <td id="r15216" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r15216) }}</td>
                        <td id="r15217" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r15217) }}</td>
                        <td class="filiTable" id="lineTot1" style="text-align: center" data-col-id='row_total_type_recrutement'>{{ total_row_type_recrutement }}</td>
                        <td id="r15218" style="text-align: center" data-col-group='row_total_hf_temps_complet'>{{ form_widget(tag.r15218) }}</td>
                        <td id="r15219" style="text-align: center" data-col-group='row_total_hf_temps_complet'>{{ form_widget(tag.r15219) }}</td>
                        <td class="filiTable" id="lineTot3" style="text-align: center" data-col-id='row_total_hf_temps_complet' data-col-group='row_total_hf'>{{ total_row_hf_temps_complet }}</td>
                        <td id="r15220" style="text-align: center" data-col-group='row_total_hf_temps_non_complet'>{{ form_widget(tag.r15220) }}</td>
                        <td id="r15221" style="text-align: center" data-col-group='row_total_hf_temps_non_complet'>{{ form_widget(tag.r15221) }}</td>
                        <td class="filiTable" id="lineTot4" style="text-align: center" data-col-id='row_total_hf_temps_non_complet' data-col-group='row_total_hf'>{{ total_row_hf_temps_non_complet }}</td>
                        <td class="filiTable" id="lineTot2" style="text-align: center" data-col-id='row_total_hf'>{{ total_row_hf }}</td>
                    </tr>

                {% endfor %}
                {% set total_fili = bilan_social_consolide.getIndPileForBy('ind152sTemp',['refCadreEmploi','refFiliere','idFili'],idFili) %}
                {% set total_fili_type_recrutement = total_fili.r1521 + total_fili.r1522 + total_fili.r1523 + total_fili.r1524 + total_fili.r1525 + total_fili.r1526 + total_fili.r1527 + total_fili.r1528 + total_fili.r1529 + total_fili.r15210 + total_fili.r15211 + total_fili.r15212 + total_fili.r15213 + total_fili.r15214 + total_fili.r15215 + total_fili.r15216 + total_fili.r15217 %}
                {% set total_fili_hf_temps_complet = total_fili.r15218 + total_fili.r15219 %}
                {% set total_fili_hf_temps_non_complet = total_fili.r15220 + total_fili.r15221 %}
                {% set total_fili_hf = total_fili_hf_temps_complet + total_fili_hf_temps_non_complet %}
                <tr class="filiTable row_totaux" id="totalFil">
                    <td><b>Total {{ tagF.lbFili }} </b></td>
                    <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_fili.r1521 }}</td>
                    <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_fili.r1522 }}</td>
                    <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_fili.r1523 }}</td>
                    <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_fili.r1524 }}</td>
                    <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_fili.r1525 }}</td>
                    <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_fili.r1526 }}</td>
                    <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_fili.r1527 }}</td>
                    <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_fili.r1528 }}</td>
                    <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_fili.r1529 }}</td>
                    <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_fili.r15210 }}</td>
                    <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_fili.r15211 }}</td>
                    <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_fili.r15212 }}</td>
                    <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_fili.r15213 }}</td>
                    <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_fili.r15214 }}</td>
                    <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_fili.r15215 }}</td>
                    <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_fili.r15216 }}</td>
                    <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_fili.r15217 }}</td>
                    <td style="text-align: center" data-col-id='row_total_type_recrutement'>{{ total_fili_type_recrutement }}</td>
                    <td style="text-align: center" data-col-group='row_total_hf_temps_complet'>{{ total_fili.r15218 }}</td>
                    <td style="text-align: center" data-col-group='row_total_hf_temps_complet'>{{ total_fili.r15219 }}</td>
                    <td style="text-align: center" data-col-group='row_total_hf' data-col-id='row_total_hf_temps_complet'>{{ total_fili_hf_temps_complet }}</td>
                    <td style="text-align: center" data-col-group='row_total_hf_temps_non_complet'>{{ total_fili.r15220 }}</td>
                    <td style="text-align: center" data-col-group='row_total_hf_temps_non_complet'>{{ total_fili.r15221 }}</td>
                    <td style="text-align: center" data-col-group='row_total_hf' data-col-id='row_total_hf_temps_non_complet'>{{ total_fili_hf_temps_non_complet }}</td>
                    <td style="text-align: center" data-col-id='row_total_hf'>{{ total_fili_hf }}</td>
                </tr>

            {% endif %}

        {% endfor %}

         <tr id="totalHorsFil" class="filiTable" style="display: none">
            <td></td>
            <td style="text-align: center">{{ totalInd152.r1521 }}</td>
            <td style="text-align: center">{{ totalInd152.r1522 }}</td>
            <td style="text-align: center">{{ totalInd152.r1523 }}</td>
            <td style="text-align: center">{{ totalInd152.r1524 }}</td>
            <td style="text-align: center">{{ totalInd152.r1525 }}</td>
            <td style="text-align: center">{{ totalInd152.r1526 }}</td>
            <td style="text-align: center">{{ totalInd152.r1527 }}</td>
            <td style="text-align: center">{{ totalInd152.r1528 }}</td>
            <td style="text-align: center">{{ totalInd152.r1529 }}</td>
            <td style="text-align: center">{{ totalInd152.r15210 }}</td>
            <td style="text-align: center">{{ totalInd152.r15211 }}</td>
            <td style="text-align: center">{{ totalInd152.r15212 }}</td>
            <td style="text-align: center">{{ totalInd152.r15213 }}</td>
            <td style="text-align: center">{{ totalInd152.r15214 }}</td>
            <td style="text-align: center">{{ totalInd152.r15215 }}</td>
            <td style="text-align: center">{{ totalInd152.r15216 }}</td>
            <td style="text-align: center">{{ totalInd152.r15217 }}</td>
            <td style="text-align: center">0</td>
            <td style="text-align: center">{{ totalInd152.r15218 }}</td>
            <td style="text-align: center">{{ totalInd152.r15219 }}</td>
            <td style="text-align: center">0</td>
            <td style="text-align: center">{{ totalInd152.r15220 }}</td>
            <td style="text-align: center">{{ totalInd152.r15221 }}</td>
            <td style="text-align: center">0</td>
            <td style="text-align: center">0</td>
        </tr>
        {% set total_all_fili = bilan_social_consolide.getIndPileForBy('ind152s',['refCadreEmploi','refFiliere','cdFili'],['AOTM','H','HH'],{'exclude':true}) %}
        {% set total_all_fili_type_recrutement = total_all_fili.r1521 + total_all_fili.r1522 + total_all_fili.r1523 + total_all_fili.r1524 + total_all_fili.r1525 + total_all_fili.r1526 + total_all_fili.r1527 + total_all_fili.r1528 + total_all_fili.r1529 + total_all_fili.r15210 + total_all_fili.r15211 + total_all_fili.r15212 + total_all_fili.r15213 + total_all_fili.r15214 + total_all_fili.r15215 + total_all_fili.r15216 + total_all_fili.r15217 %}
        {% set total_all_fili_hf_temps_complet = total_all_fili.r15218 + total_all_fili.r15219 %}
        {% set total_all_fili_hf_temps_non_complet = total_all_fili.r15220 + total_all_fili.r15221 %}
        {% set total_all_fili_hf = total_all_fili_hf_temps_complet + total_all_fili_hf_temps_non_complet %}
        <tr id="totalFilGlo" class="filiTable row_totaux">
            <td><b>TOUTES FILIERES</b></td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_all_fili.r1521 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_all_fili.r1522 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_all_fili.r1523 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_all_fili.r1524 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_all_fili.r1525 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_all_fili.r1526 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_all_fili.r1527 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_all_fili.r1528 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_all_fili.r1529 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_all_fili.r15210 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_all_fili.r15211 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_all_fili.r15212 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_all_fili.r15213 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_all_fili.r15214 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_all_fili.r15215 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_all_fili.r15216 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_all_fili.r15217 }}</td>
            <td style="text-align: center" data-col-id='row_total_type_recrutement'>{{ total_all_fili_type_recrutement }}</td>
            <td style="text-align: center" data-col-group='row_total_hf_temps_complet'>{{ total_all_fili.r15218 }}</td>
            <td style="text-align: center" data-col-group='row_total_hf_temps_complet'>{{ total_all_fili.r15219 }}</td>
            <td style="text-align: center" data-col-group='row_total_hf' data-col-id='row_total_hf_temps_complet'>{{ total_all_fili_hf_temps_complet }}</td>
            <td style="text-align: center" data-col-group='row_total_hf_temps_non_complet'>{{ total_all_fili.r15220 }}</td>
            <td style="text-align: center" data-col-group='row_total_hf_temps_non_complet'>{{ total_all_fili.r15221 }}</td>
            <td style="text-align: center" data-col-group='row_total_hf' data-col-id='row_total_hf_temps_non_complet'>{{ total_all_fili_hf_temps_non_complet }}</td>
            <td style="text-align: center" data-col-id='row_total_hf'>{{ total_all_fili_hf }}</td>
        </tr>

{#        {% for tag in formEffectif152.ind152AotmsTemp %}#}
{#            {% set row_data = tag.vars.value %}#}
{#            {% set total_row_type_recrutement = row_data.r1521 + row_data.r1522 + row_data.r1523 + row_data.r1524 + row_data.r1525 + row_data.r1526 + row_data.r1527 + row_data.r1528 + row_data.r1529 + row_data.r15210 + row_data.r15211 + row_data.r15212 + row_data.r15213 + row_data.r15214 + row_data.r15215 + row_data.r15216 + row_data.r15217 %}#}
{#            {% set total_row_hf_temps_complet = row_data.r15218 + row_data.r15219 %}#}
{#            {% set total_row_hf_temps_non_complet = row_data.r15220 + row_data.r15221 %}#}
{#            {% set total_row_hf = total_row_hf_temps_complet + total_row_hf_temps_non_complet %}#}
{#            <tr id="152trCE_{{ tag.refCadreEmploi.vars.value }}" lineAotm="1">#}
{#                <td>#}
{#                    {{ form_widget(tag.refCadreEmploi) }}#}
{#                    {{ tag.refCadreEmploi.vars.data.lbCadrempl }}#}
{#                </td>#}
{#                <td id="r1521" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r1521) }}</td>#}
{#                <td id="r1522" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r1522) }}</td>#}
{#                <td id="r1523" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r1523) }}</td>#}
{#                <td id="r1524" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r1524) }}</td>#}
{#                <td id="r1525" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r1525) }}</td>#}
{#                <td id="r1526" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r1526) }}</td>#}
{#                <td id="r1527" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r1527) }}</td>#}
{#                <td id="r1528" style="text-align: center;min-width: 50px;" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r1528) }}</td>#}
{#                <td id="r1529" style="text-align: center;min-width: 50px;" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r1529) }}</td>#}
{#                <td id="r15210" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r15210) }}</td>#}
{#                <td id="r15211" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r15211) }}</td>#}
{#                <td id="r15212" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r15212) }}</td>#}
{#                <td id="r15213" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r15213) }}</td>#}
{#                <td id="r15214" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r15214) }}</td>#}
{#                <td id="r15215" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r15215) }}</td>#}
{#                <td id="r15216" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r15216) }}</td>#}
{#                <td id="r15217" style="text-align: center" data-col-group='row_total_type_recrutement'>{{ form_widget(tag.r15217) }}</td>#}
{#                <td class="filiTable" id="lineTot1" style="text-align: center" data-col-id='row_total_type_recrutement'>{{ total_row_type_recrutement }}</td>#}
{#                <td id="r15218" style="text-align: center" data-col-group='row_total_hf_temps_complet'>{{ form_widget(tag.r15218) }}</td>#}
{#                <td id="r15219" style="text-align: center" data-col-group='row_total_hf_temps_complet'>{{ form_widget(tag.r15219) }}</td>#}
{#                <td class="filiTable" id="lineTot3" style="text-align: center" data-col-group='row_total_hf' data-col-id='row_total_hf_temps_complet'>{{ total_row_hf_temps_complet }}</td>#}
{#                <td id="r15220" style="text-align: center" data-col-group='row_total_hf_temps_non_complet'>{{ form_widget(tag.r15220) }}</td>#}
{#                <td id="r15221" style="text-align: center" data-col-group='row_total_hf_temps_non_complet'>{{ form_widget(tag.r15221) }}</td>#}
{#                <td class="filiTable" id="lineTot4" style="text-align: center" data-col-group='row_total_hf' data-col-id='row_total_hf_temps_non_complet'>{{ total_row_hf_temps_non_complet }}</td>#}
{#                <td class="filiTable" id="lineTot2" style="text-align: center" data-col-id='row_total_hf'>{{ total_row_hf }}</td>#}
{#            </tr>#}

{#        {% endfor %}#}
        {% set total_ind = bilan_social_consolide.getIndPileForBy('ind152s',['refCadreEmploi','refFiliere','cdFili'],['H','HH'],{'exclude':true}) %}
        {% set total_ind_type_recrutement = total_ind.r1521 + total_ind.r1522 + total_ind.r1523 + total_ind.r1524 + total_ind.r1525 + total_ind.r1526 + total_ind.r1527 + total_ind.r1528 + total_ind.r1529 + total_ind.r15210 + total_ind.r15211 + total_ind.r15212 + total_ind.r15213 + total_ind.r15214 + total_ind.r15215 + + total_ind.r15216 + total_ind.r15217 %}
        {% set total_ind_hf_temps_complet = total_ind.r15218 + total_ind.r15219 %}
        {% set total_ind_hf_temps_non_complet = total_ind.r15220 + total_ind.r15221 %}
        {% set total_ind_hf = total_ind_hf_temps_complet + total_ind_hf_temps_non_complet %}
        <tr id="totalGlo" class="filiTable row_totaux" hidden>
            <td><b>TOTAL</b></td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_ind.r1521 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_ind.r1522 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_ind.r1523 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_ind.r1524 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_ind.r1525 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_ind.r1526 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_ind.r1527 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_ind.r1528 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_ind.r1529 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_ind.r15210 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_ind.r15211 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_ind.r15212 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_ind.r15213 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_ind.r15214 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_ind.r15215 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_ind.r15216 }}</td>
            <td style="text-align: center" data-col-group='row_total_type_recrutement'>{{ total_ind.r15217 }}</td>
            <td style="text-align: center" data-col-id='row_total_type_recrutement'>{{ total_ind_type_recrutement }}</td>
            <td style="text-align: center" data-col-group='row_total_hf_temps_complet'>{{ total_ind.r15218 }}</td>
            <td style="text-align: center" data-col-group='row_total_hf_temps_complet'>{{ total_ind.r15219 }}</td>
            <td style="text-align: center" data-col-group='row_total_hf' data-col-id='row_total_hf_temps_complet'>{{ total_ind_hf_temps_complet }}</td>
            <td style="text-align: center" data-col-group='row_total_hf_temps_non_complet'>{{ total_ind.r15220 }}</td>
            <td style="text-align: center" data-col-group='row_total_hf_temps_non_complet'>{{ total_ind.r15221 }}</td>
            <td style="text-align: center" data-col-group='row_total_hf' data-col-id='row_total_hf_temps_non_complet'>{{ total_ind_hf_temps_non_complet }}</td>
            <td style="text-align: center" data-col-id='row_total_hf'>{{ total_ind_hf }}</td>
        </tr>

        </tbody>
    </table>
    <br/>

    <input class="btn button-tableau pull-right" type="submit" value="Enregistrer et valider les contrôles de cohérence" name="valider" onclick="recordAuto = false;
                $('#progImg').show();" data-valide="1"/>

    <img id="progImg" src="{{ asset("img/progress.gif") }}" style="display:none"/>

    {{ form_end(formEffectif152) }}

    <script type="text/javascript">
        $(document).ready(function () {
            changeDetect = false;
            {% include 'stickyheader.txt' %}
            getBrowserSetSticky(ind152Table);
   
            {% if questionCollectiviteConsolide.q12 == true %}

            $(document).change();
            //update152(true);

            {% endif %}
        });


        function initLight152() {
            if (incoherenceList != undefined) {
                // Si le json js a été chargé  (via un eneregistrement) => light via le json
                for (var idx in incoherenceList) {
                    var incoh = incoherenceList[idx];
                    if (incoh.tableNum == '1.5.2') {
                        lightError(incoh.field, incoh.incoherence);
                    }
                }
            } else {
                // si premier acces à la page => light via le twig

                {% for tag in incoherenceList %}
                {% if tag.tableNum == '1.5.2' %}
                lightError('{{ tag.field }}', {{ tag.blIncoherence }});
                {% endif %}
                {% endfor %}

            }
        }

        /*
         * METHODES Tableau 1.5.2
         */
        {% if questionCollectiviteConsolide.q12 == true %}

        function toggleFiliere152(toggleObj, pidFili) {
            var css = toggleObj.getAttribute('class');

            {% if idFili != null and idFili != 0 %}
            // Sauvegarde auto
            if (currentTab != "")
                saveTab(currentTab);
            {% endif %}

            if (css == "buttonplus") {
                $('#ind152').load('{{ path('bilan_conso_effectif_ind152_edit') }}?idFili=' + pidFili, function () {
                    initLight152();
                    disabled();
                });

            } else {
                $('#ind152').load('{{ path('bilan_conso_effectif_ind152_edit') }}?idFili=' + 0, function () {
                    initLight152();
                    disabled();
                });

            }
        }

        function changedR152(obj) {
            //update152(false);
        }


        function update152(onInit) {
            var table152 = document.getElementById('ind152Table');

            var rowLength152 = table152.rows.length;
            var idxRowInput = 0;

            var idxRowInputAotm = 0;

            var mtTot1 = 0;
            var mtTot2 = 0;
            var mtTot3 = 0;
            var mtTot4 = 0;
            var mtTot5 = 0;
            var mtTot6 = 0;
            var mtTot7 = 0;
            var mtTot8 = 0;
            var mtTot9 = 0;
            var mtTot10 = 0;
            var mtTot11 = 0;
            var mtTot12 = 0;
            var mtTot13 = 0;
            var mtTot14 = 0;
            var mtTot15 = 0;
            var mtTot16 = 0;
            var mtTot17 = 0;
            var mtTot18 = 0;
            var mtTot19 = 0;
            var mtTot20 = 0;
            var mtTot21 = 0;

            var mtTot1Fil = 0;
            var mtTot2Fil = 0;
            var mtTot3Fil = 0;
            var mtTot4Fil = 0;
            var mtTot5Fil = 0;
            var mtTot6Fil = 0;
            var mtTot7Fil = 0;
            var mtTot8Fil = 0;
            var mtTot9Fil = 0;
            var mtTot10Fil = 0;
            var mtTot11Fil = 0;
            var mtTot12Fil = 0;
            var mtTot13Fil = 0;
            var mtTot14Fil = 0;
            var mtTot15Fil = 0;
            var mtTot16Fil = 0;
            var mtTot17Fil = 0;
            var mtTot18Fil = 0;
            var mtTot19Fil = 0;
            var mtTot20Fil = 0;
            var mtTot21Fil = 0;

            var mtTot1FilGlo = 0;
            var mtTot2FilGlo = 0;
            var mtTot3FilGlo = 0;
            var mtTot4FilGlo = 0;
            var mtTot5FilGlo = 0;
            var mtTot6FilGlo = 0;
            var mtTot7FilGlo = 0;
            var mtTot8FilGlo = 0;
            var mtTot9FilGlo = 0;
            var mtTot10FilGlo = 0;
            var mtTot11FilGlo = 0;
            var mtTot12FilGlo = 0;
            var mtTot13FilGlo = 0;
            var mtTot14FilGlo = 0;
            var mtTot15FilGlo = 0;
            var mtTot16FilGlo = 0;
            var mtTot17FilGlo = 0;
            var mtTot18FilGlo = 0;
            var mtTot19FilGlo = 0;
            var mtTot20FilGlo = 0;
            var mtTot21FilGlo = 0;

            var mtTot1HorsFil = 0;
            var mtTot2HorsFil = 0;
            var mtTot3HorsFil = 0;
            var mtTot4HorsFil = 0;
            var mtTot5HorsFil = 0;
            var mtTot6HorsFil = 0;
            var mtTot7HorsFil = 0;
            var mtTot8HorsFil = 0;
            var mtTot9HorsFil = 0;
            var mtTot10HorsFil = 0;
            var mtTot11HorsFil = 0;
            var mtTot12HorsFil = 0;
            var mtTot13HorsFil = 0;
            var mtTot14HorsFil = 0;
            var mtTot15HorsFil = 0;
            var mtTot16HorsFil = 0;
            var mtTot17HorsFil = 0;
            var mtTot18HorsFil = 0;
            var mtTot19HorsFil = 0;
            var mtTot20HorsFil = 0;
            var mtTot21HorsFil = 0;

            var mtTot1Glo = 0;
            var mtTot2Glo = 0;
            var mtTot3Glo = 0;
            var mtTot4Glo = 0;
            var mtTot5Glo = 0;
            var mtTot6Glo = 0;
            var mtTot7Glo = 0;
            var mtTot8Glo = 0;
            var mtTot9Glo = 0;
            var mtTot10Glo = 0;
            var mtTot11Glo = 0;
            var mtTot12Glo = 0;
            var mtTot13Glo = 0;
            var mtTot14Glo = 0;
            var mtTot15Glo = 0;
            var mtTot16Glo = 0;
            var mtTot17Glo = 0;
            var mtTot18Glo = 0;
            var mtTot19Glo = 0;
            var mtTot20Glo = 0;
            var mtTot21Glo = 0;

            for (var i = 0; i < rowLength152; i += 1) {
                var row = table152.rows[i];

                if (row.getAttribute("entete") != undefined && row.getAttribute("entete") == "1") {
                    continue;
                }

                var lineAotm = false;
                var lineData = false;

                if (row.getAttribute("lineAotm") != undefined) {
                    lineAotm = true;
                }
                if (row.getAttribute("lineData") != undefined) {
                    lineData = true;
                }

                var cellLength = row.cells.length;

                var lineTotalFil = false;
                var lineTotalFilGlo = false;
                var lineTotalGlo = false;
                var lineTot1 = 0;
                var lineTot2 = 0;
                var lineTot3 = 0;
                var lineTot4 = 0;


                if (row.id.substring(0, 8) == "entetFil") {
                    continue;
                }

                if (row.id.substring(0, 18) == "totalHorsFil") {
                    for (var y = 0; y < cellLength; y += 1) {
                        var cell = row.cells[y];
                        if (y == 1) {
                            mtTot1HorsFil = parseInt(cell.innerHTML);
                        } else if (y == 2) {
                            mtTot2HorsFil = parseInt(cell.innerHTML);
                        } else if (y == 3) {
                            mtTot3HorsFil = parseInt(cell.innerHTML);
                        } else if (y == 4) {
                            mtTot4HorsFil = parseInt(cell.innerHTML);
                        } else if (y == 5) {
                            mtTot5HorsFil = parseInt(cell.innerHTML);
                        } else if (y == 6) {
                            mtTot6HorsFil = parseInt(cell.innerHTML);
                        } else if (y == 7) {
                            mtTot7HorsFil = parseInt(cell.innerHTML);
                        } else if (y == 8) {
                            mtTot8HorsFil = parseInt(cell.innerHTML);
                        } else if (y == 9) {
                            mtTot9HorsFil = parseInt(cell.innerHTML);
                        } else if (y == 10) {
                            mtTot10HorsFil = parseInt(cell.innerHTML);
                        } else if (y == 11) {
                            mtTot11HorsFil = parseInt(cell.innerHTML);
                        } else if (y == 12) {
                            mtTot12HorsFil = parseInt(cell.innerHTML);
                        } else if (y == 13) {
                            mtTot13HorsFil = parseInt(cell.innerHTML);
                        } else if (y == 14) {
                            mtTot14HorsFil = parseInt(cell.innerHTML);
                        } else if (y == 15) {
                            mtTot15HorsFil = parseInt(cell.innerHTML);
                        } else if (y == 16) {
                            mtTot16HorsFil = parseInt(cell.innerHTML);
                        } else if (y == 17) {
                            mtTot17HorsFil = parseInt(cell.innerHTML);
                        } else if (y == 18) {

                        } else if (y == 19) {
                            mtTot18HorsFil = parseInt(cell.innerHTML);
                        } else if (y == 20) {
                            mtTot19HorsFil = parseInt(cell.innerHTML);
                        } else if (y == 21) {

                        } else if (y == 22) {
                            mtTot20HorsFil = parseInt(cell.innerHTML);
                        } else if (y == 23) {
                            mtTot21HorsFil = parseInt(cell.innerHTML);
                        } else if (y == 24) {

                        } else if (y == 25) {

                        }
                    }
                }

                lineTot1 = 0;
                lineTot2 = 0;
                lineTot3 = 0;
                lineTot4 = 0;

                if (row.id.substring(0, 11) == "totalFilGlo") {
                    lineTotalFilGlo = true;
                    for (var y = 0; y < cellLength; y += 1) {
                        var cell = row.cells[y];
                        if (y == 1) {
                            cell.innerHTML = mtTot1FilGlo + mtTot1HorsFil;
                            lineTot1 += mtTot1FilGlo + mtTot1HorsFil;
                            mtTot1FilGlo = 0;
                        } else if (y == 2) {
                            cell.innerHTML = mtTot2FilGlo + mtTot2HorsFil;
                            mtTot2FilGlo = 0;
                        } else if (y == 3) {
                            cell.innerHTML = mtTot3FilGlo + mtTot3HorsFil;
                            lineTot1 += mtTot3FilGlo + mtTot3HorsFil;
                            mtTot3FilGlo = 0;
                        } else if (y == 4) {
                            cell.innerHTML = mtTot4FilGlo + mtTot4HorsFil;
                            lineTot1 += mtTot4FilGlo + mtTot4HorsFil;
                            mtTot4FilGlo = 0;
                        } else if (y == 5) {
                            cell.innerHTML = mtTot5FilGlo + mtTot5HorsFil;
                            lineTot1 += mtTot5FilGlo + mtTot5HorsFil;
                            mtTot5FilGlo = 0;
                        } else if (y == 6) {
                            cell.innerHTML = mtTot6FilGlo + mtTot6HorsFil;
                            lineTot1 += mtTot6FilGlo + mtTot6HorsFil;
                            mtTot6FilGlo = 0;
                        } else if (y == 7) {
                            cell.innerHTML = mtTot7FilGlo + mtTot7HorsFil;
                            lineTot1 += mtTot7FilGlo + mtTot7HorsFil;
                            mtTot7FilGlo = 0;
                        } else if (y == 8) {
                            cell.innerHTML = mtTot8FilGlo + mtTot8HorsFil;
                            lineTot1 += mtTot8FilGlo + mtTot8HorsFil;
                            mtTot8FilGlo = 0;
                        } else if (y == 9) {
                            cell.innerHTML = mtTot9FilGlo + mtTot9HorsFil;
                            lineTot1 += mtTot9FilGlo + mtTot9HorsFil;
                            mtTot9FilGlo = 0;
                        } else if (y == 10) {
                            cell.innerHTML = mtTot10FilGlo + mtTot10HorsFil;
                            lineTot1 += mtTot10FilGlo + mtTot10HorsFil;
                            mtTot10FilGlo = 0;
                        } else if (y == 11) {
                            cell.innerHTML = mtTot11FilGlo + mtTot11HorsFil;
                            lineTot1 += mtTot11FilGlo + mtTot11HorsFil;
                            mtTot11FilGlo = 0;
                        } else if (y == 12) {
                            cell.innerHTML = mtTot12FilGlo + mtTot12HorsFil;
                            lineTot1 += mtTot12FilGlo + mtTot12HorsFil;
                            mtTot12FilGlo = 0;
                        } else if (y == 13) {
                            cell.innerHTML = mtTot13FilGlo + mtTot13HorsFil;
                            lineTot1 += mtTot13FilGlo + mtTot13HorsFil;
                            mtTot13FilGlo = 0;
                        } else if (y == 14) {
                            cell.innerHTML = mtTot14FilGlo + mtTot14HorsFil;
                            lineTot1 += mtTot14FilGlo + mtTot14HorsFil;
                            mtTot14FilGlo = 0;
                        } else if (y == 15) {
                            cell.innerHTML = mtTot15FilGlo + mtTot15HorsFil;
                            lineTot1 += mtTot15FilGlo + mtTot15HorsFil;
                            mtTot15FilGlo = 0;
                        } else if (y == 16) {
                            cell.innerHTML = mtTot16FilGlo + mtTot16HorsFil;
                            lineTot1 += mtTot16FilGlo + mtTot16HorsFil;
                            mtTot16FilGlo = 0;
                        } else if (y == 17) {
                            cell.innerHTML = mtTot17FilGlo + mtTot17HorsFil;
                            lineTot1 += mtTot17FilGlo + mtTot17HorsFil;
                            mtTot17FilGlo = 0;
                        } else if (y == 18) {
                            cell.innerHTML = lineTot1;
                        } else if (y == 19) {
                            cell.innerHTML = mtTot18FilGlo + mtTot18HorsFil;
                            lineTot2 += mtTot18FilGlo + mtTot18HorsFil;
                            lineTot3 += mtTot18FilGlo + mtTot18HorsFil;
                            mtTot18FilGlo = 0;
                        } else if (y == 20) {
                            cell.innerHTML = mtTot19FilGlo + mtTot19HorsFil;
                            lineTot2 += mtTot19FilGlo + mtTot19HorsFil;
                            lineTot3 += mtTot19FilGlo + mtTot19HorsFil;
                            mtTot19FilGlo = 0;
                        } else if (y == 21) {
                            cell.innerHTML = lineTot3;
                        } else if (y == 22) {
                            cell.innerHTML = mtTot20FilGlo + mtTot20HorsFil;
                            lineTot2 += mtTot20FilGlo + mtTot20HorsFil;
                            lineTot4 += mtTot20FilGlo + mtTot20HorsFil;
                            mtTot20FilGlo = 0;
                        } else if (y == 23) {
                            cell.innerHTML = mtTot21FilGlo + mtTot21HorsFil;
                            lineTot2 += mtTot21FilGlo + mtTot21HorsFil;
                            lineTot4 += mtTot21FilGlo + mtTot21HorsFil;
                            mtTot21FilGlo = 0;
                        } else if (y == 24) {
                            cell.innerHTML = lineTot4;
                        } else if (y == 25) {
                            cell.innerHTML = lineTot2;
                        }
                    }
                } else if (row.id.substring(0, 8) == "totalFil") {
                    lineTotalFil = true;
                    for (var y = 0; y < cellLength; y += 1) {
                        var cell = row.cells[y];
                        if (y == 1) {
                            cell.innerHTML = mtTot1Fil;
                            lineTot1 += mtTot1Fil;
                            mtTot1Fil = 0;
                        } else if (y == 2) {
                            cell.innerHTML = mtTot2Fil;
                            lineTot1 += mtTot2Fil;
                            mtTot2Fil = 0;
                        } else if (y == 3) {
                            cell.innerHTML = mtTot3Fil;
                            lineTot1 += mtTot3Fil;
                            mtTot3Fil = 0;
                        } else if (y == 4) {
                            cell.innerHTML = mtTot4Fil;
                            lineTot1 += mtTot4Fil;
                            mtTot4Fil = 0;
                        } else if (y == 5) {
                            cell.innerHTML = mtTot5Fil;
                            lineTot1 += mtTot5Fil;
                            mtTot5Fil = 0;
                        } else if (y == 6) {
                            cell.innerHTML = mtTot6Fil;
                            lineTot1 += mtTot6Fil;
                            mtTot6Fil = 0;
                        } else if (y == 7) {
                            cell.innerHTML = mtTot7Fil;
                            lineTot1 += mtTot7Fil;
                            mtTot7Fil = 0;
                        } else if (y == 8) {
                            cell.innerHTML = mtTot8Fil;
                            lineTot1 += mtTot8Fil;
                            mtTot8Fil = 0;
                        } else if (y == 9) {
                            cell.innerHTML = mtTot9Fil;
                            lineTot1 += mtTot9Fil;
                            mtTot9Fil = 0;
                        } else if (y == 10) {
                            cell.innerHTML = mtTot10Fil;
                            lineTot1 += mtTot10Fil;
                            mtTot10Fil = 0;
                        } else if (y == 11) {
                            cell.innerHTML = mtTot11Fil;
                            lineTot1 += mtTot11Fil;
                            mtTot11Fil = 0;
                        } else if (y == 12) {
                            cell.innerHTML = mtTot12Fil;
                            lineTot1 += mtTot12Fil;
                            mtTot12Fil = 0;
                        } else if (y == 13) {
                            cell.innerHTML = mtTot13Fil;
                            lineTot1 += mtTot13Fil;
                            mtTot13Fil = 0;
                        } else if (y == 14) {
                            cell.innerHTML = mtTot14Fil;
                            lineTot1 += mtTot14Fil;
                            mtTot14Fil = 0;
                        } else if (y == 15) {
                            cell.innerHTML = mtTot15Fil;
                            lineTot1 += mtTot15Fil;
                            mtTot15Fil = 0;
                        } else if (y == 16) {
                            cell.innerHTML = mtTot16Fil;
                            lineTot1 += mtTot16Fil;
                            mtTot16Fil = 0;
                        } else if (y == 17) {
                            cell.innerHTML = mtTot17Fil;
                            lineTot1 += mtTot17Fil;
                            mtTot17Fil = 0;
                        } else if (y == 18) {
                            cell.innerHTML = lineTot1;
                        } else if (y == 19) {
                            cell.innerHTML = mtTot18Fil;
                            lineTot2 += mtTot18Fil;
                            lineTot3 += mtTot18Fil;
                            mtTot18Fil = 0;
                        } else if (y == 20) {
                            cell.innerHTML = mtTot19Fil;
                            lineTot2 += mtTot19Fil;
                            lineTot3 += mtTot19Fil;
                            mtTot19Fil = 0;
                        } else if (y == 21) {
                            cell.innerHTML = lineTot3;
                        } else if (y == 22) {
                            cell.innerHTML = mtTot20Fil;
                            lineTot2 += mtTot20Fil;
                            lineTot4 += mtTot20Fil;
                            mtTot20Fil = 0;
                        } else if (y == 23) {
                            cell.innerHTML = mtTot21Fil;
                            lineTot2 += mtTot21Fil;
                            lineTot4 += mtTot21Fil;
                            mtTot21Fil = 0;
                        } else if (y == 24) {
                            cell.innerHTML = lineTot4;
                        } else if (y == 25) {
                            cell.innerHTML = lineTot2;
                        }
                    }
                }

                lineTot1 = 0;
                lineTot2 = 0;
                lineTot3 = 0;
                lineTot4 = 0;

                if (row.id.substring(0, 8) == "totalGlo") {
                    lineTotalGlo = true;
                    for (var y = 0; y < cellLength; y += 1) {
                        var cell = row.cells[y];
                        if (y == 1) {
                            cell.innerHTML = mtTot1Glo + mtTot1HorsFil;
                            lineTot1 += mtTot1Glo + mtTot1HorsFil;
                            mtTot1Glo = 0;
                        } else if (y == 2) {
                            cell.innerHTML = mtTot2Glo + mtTot2HorsFil;
                            lineTot1 += mtTot2Glo + mtTot2HorsFil;
                            mtTot2Glo = 0;
                        } else if (y == 3) {
                            cell.innerHTML = mtTot3Glo + mtTot3HorsFil;
                            lineTot1 += mtTot3Glo + mtTot3HorsFil;
                            mtTot3Glo = 0;
                        } else if (y == 4) {
                            cell.innerHTML = mtTot4Glo + mtTot4HorsFil;
                            lineTot1 += mtTot4Glo + mtTot4HorsFil;
                            mtTot4Glo = 0;
                        } else if (y == 5) {
                            cell.innerHTML = mtTot5Glo + mtTot5HorsFil;
                            lineTot1 += mtTot5Glo + mtTot5HorsFil;
                            mtTot5Glo = 0;
                        } else if (y == 6) {
                            cell.innerHTML = mtTot6Glo + mtTot6HorsFil;
                            lineTot1 += mtTot6Glo + mtTot6HorsFil;
                            mtTot6Glo = 0;
                        } else if (y == 7) {
                            cell.innerHTML = mtTot7Glo + mtTot7HorsFil;
                            lineTot1 += mtTot7Glo + mtTot7HorsFil;
                            mtTot7Glo = 0;
                        } else if (y == 8) {
                            cell.innerHTML = mtTot8Glo + mtTot8HorsFil;
                            lineTot1 += mtTot8Glo + mtTot8HorsFil;
                            mtTot8Glo = 0;
                        } else if (y == 9) {
                            cell.innerHTML = mtTot9Glo + mtTot9HorsFil;
                            lineTot1 += mtTot9Glo + mtTot9HorsFil;
                            mtTot9Glo = 0;
                        } else if (y == 10) {
                            cell.innerHTML = mtTot10Glo + mtTot10HorsFil;
                            lineTot1 += mtTot10Glo + mtTot10HorsFil;
                            mtTot10Glo = 0;
                        } else if (y == 11) {
                            cell.innerHTML = mtTot11Glo + mtTot11HorsFil;
                            lineTot1 += mtTot11Glo + mtTot11HorsFil;
                            mtTot11Glo = 0;
                        } else if (y == 12) {
                            cell.innerHTML = mtTot12Glo + mtTot12HorsFil;
                            lineTot1 += mtTot12Glo + mtTot12HorsFil;
                            mtTot12Glo = 0;
                        } else if (y == 13) {
                            cell.innerHTML = mtTot13Glo + mtTot13HorsFil;
                            lineTot1 += mtTot13Glo + mtTot13HorsFil;
                            mtTot13Glo = 0;
                        } else if (y == 14) {
                            cell.innerHTML = mtTot14Glo + mtTot14HorsFil;
                            lineTot1 += mtTot14Glo + mtTot14HorsFil;
                            mtTot14Glo = 0;
                        } else if (y == 15) {
                            cell.innerHTML = mtTot15Glo + mtTot15HorsFil;
                            lineTot1 += mtTot15Glo + mtTot15HorsFil;
                            mtTot15Glo = 0;
                        } else if (y == 16) {
                            cell.innerHTML = mtTot16Glo + mtTot16HorsFil;
                            lineTot1 += mtTot16Glo + mtTot16HorsFil;
                            mtTot16Glo = 0;
                        } else if (y == 17) {
                            cell.innerHTML = mtTot17Glo + mtTot17HorsFil;
                            lineTot1 += mtTot17Glo + mtTot17HorsFil;
                            mtTot17Glo = 0;
                        } else if (y == 18) {
                            cell.innerHTML = lineTot1;
                        } else if (y == 19) {
                            cell.innerHTML = mtTot18Glo + mtTot18HorsFil;
                            lineTot2 += mtTot18Glo + mtTot18HorsFil;
                            lineTot3 += mtTot18Glo + mtTot18HorsFil;
                            mtTot18Glo = 0;
                        } else if (y == 20) {
                            cell.innerHTML = mtTot19Glo + mtTot19HorsFil;
                            lineTot2 += mtTot19Glo + mtTot19HorsFil;
                            lineTot3 += mtTot19Glo + mtTot19HorsFil;
                            mtTot19Glo = 0;
                        } else if (y == 21) {
                            cell.innerHTML = lineTot3;
                        } else if (y == 22) {
                            cell.innerHTML = mtTot20Glo + mtTot20HorsFil;
                            lineTot2 += mtTot20Glo + mtTot20HorsFil;
                            lineTot4 += mtTot20Glo + mtTot20HorsFil;
                            mtTot20Glo = 0;
                        } else if (y == 23) {
                            cell.innerHTML = mtTot21Glo + mtTot21HorsFil;
                            lineTot2 += mtTot21Glo + mtTot21HorsFil;
                            lineTot4 += mtTot21Glo + mtTot21HorsFil;
                            mtTot21Glo = 0;
                        } else if (y == 24) {
                            cell.innerHTML = lineTot4;
                        } else if (y == 25) {
                            cell.innerHTML = lineTot2;
                        }
                    }
                }

                lineTot1 = 0;
                lineTot2 = 0;
                lineTot3 = 0;
                lineTot4 = 0;

                for (var y = 0; y < cellLength; y += 1) {
                    var cell = row.cells[y];
                    var cellValue;

                    if (cell.id.substring(0, 5) == "r1523") {
                        cellValue = $('#bscForm152_ind152' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r1523').val();
                        if (cellValue != "") {
                            cellValue = parseInt(cellValue);
                            if (!lineAotm) {
                                mtTot3 += cellValue;
                                mtTot3Fil += cellValue;
                                mtTot3FilGlo += cellValue;
                            }
                            mtTot3Glo += cellValue;
                            lineTot1 += cellValue;
                        }
                    } else if (cell.id.substring(0, 5) == "r1524") {
                        cellValue = $('#bscForm152_ind152' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r1524').val();
                        if (cellValue != "") {
                            cellValue = parseInt(cellValue);
                            if (!lineAotm) {
                                mtTot4 += cellValue;
                                mtTot4Fil += cellValue;
                                mtTot4FilGlo += cellValue;
                            }
                            mtTot4Glo += cellValue;
                            lineTot1 += cellValue;
                        }
                    } else if (cell.id.substring(0, 5) == "r1525") {
                        cellValue = $('#bscForm152_ind152' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r1525').val();
                        if (cellValue != "") {
                            cellValue = parseInt(cellValue);
                            if (!lineAotm) {
                                mtTot5 += cellValue;
                                mtTot5Fil += cellValue;
                                mtTot5FilGlo += cellValue;
                            }
                            mtTot5Glo += cellValue;
                            lineTot1 += cellValue;
                        }
                    } else if (cell.id.substring(0, 5) == "r1526") {
                        cellValue = $('#bscForm152_ind152' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r1526').val();
                        if (cellValue != "") {
                            cellValue = parseInt(cellValue);
                            if (!lineAotm) {
                                mtTot6 += cellValue;
                                mtTot6Fil += cellValue;
                                mtTot6FilGlo += cellValue;
                            }
                            mtTot6Glo += cellValue;
                            lineTot1 += cellValue;
                        }
                    } else if (cell.id.substring(0, 5) == "r1527") {
                        cellValue = $('#bscForm152_ind152' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r1527').val();
                        if (cellValue != "") {
                            cellValue = parseInt(cellValue);
                            if (!lineAotm) {
                                mtTot7 += cellValue;
                                mtTot7Fil += cellValue;
                                mtTot7FilGlo += cellValue;
                            }
                            mtTot7Glo += cellValue;
                            lineTot1 += cellValue;
                        }
                    } else if (cell.id.substring(0, 5) == "r1528") {
                        cellValue = $('#bscForm152_ind152' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r1528').val();
                        if (cellValue != "") {
                            cellValue = parseInt(cellValue);
                            if (!lineAotm) {
                                mtTot8 += cellValue;
                                mtTot8Fil += cellValue;
                                mtTot8FilGlo += cellValue;
                            }
                            mtTot8Glo += cellValue;
                            lineTot1 += cellValue;
                        }
                    } else if (cell.id.substring(0, 5) == "r1529") {
                        cellValue = $('#bscForm152_ind152' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r1529').val();
                        if (cellValue != "") {
                            cellValue = parseInt(cellValue);
                            if (!lineAotm) {
                                mtTot9 += cellValue;
                                mtTot9Fil += cellValue;
                                mtTot9FilGlo += cellValue;
                            }
                            mtTot9Glo += cellValue;
                            lineTot1 += cellValue;
                        }
                    } else if (cell.id.substring(0, 6) == "r15210") {
                        cellValue = $('#bscForm152_ind152' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r15210').val();
                        if (cellValue != "") {
                            cellValue = parseInt(cellValue);
                            if (!lineAotm) {
                                mtTot10 += cellValue;
                                mtTot10Fil += cellValue;
                                mtTot10FilGlo += cellValue;
                            }
                            mtTot10Glo += cellValue;
                            lineTot1 += cellValue;
                        }
                    } else if (cell.id.substring(0, 6) == "r15211") {
                        cellValue = $('#bscForm152_ind152' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r15211').val();
                        if (cellValue != "") {
                            cellValue = parseInt(cellValue);
                            if (!lineAotm) {
                                mtTot11 += cellValue;
                                mtTot11Fil += cellValue;
                                mtTot11FilGlo += cellValue;
                            }
                            mtTot11Glo += cellValue;
                            lineTot1 += cellValue;
                        }
                    } else if (cell.id.substring(0, 6) == "r15212") {
                        cellValue = $('#bscForm152_ind152' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r15212').val();
                        if (cellValue != "") {
                            cellValue = parseInt(cellValue);
                            if (!lineAotm) {
                                mtTot12 += cellValue;
                                mtTot12Fil += cellValue;
                                mtTot12FilGlo += cellValue;
                            }
                            mtTot12Glo += cellValue;
                            lineTot1 += cellValue;
                        }
                    } else if (cell.id.substring(0, 6) == "r15213") {
                        cellValue = $('#bscForm152_ind152' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r15213').val();
                        if (cellValue != "") {
                            cellValue = parseInt(cellValue);
                            if (!lineAotm) {
                                mtTot13 += cellValue;
                                mtTot13Fil += cellValue;
                                mtTot13FilGlo += cellValue;
                            }
                            mtTot13Glo += cellValue;
                            lineTot1 += cellValue;
                        }
                    } else if (cell.id.substring(0, 6) == "r15214") {
                        cellValue = $('#bscForm152_ind152' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r15214').val();
                        if (cellValue != "") {
                            cellValue = parseInt(cellValue);
                            if (!lineAotm) {
                                mtTot14 += cellValue;
                                mtTot14Fil += cellValue;
                                mtTot14FilGlo += cellValue;
                            }
                            mtTot14Glo += cellValue;
                            lineTot1 += cellValue;
                        }
                    } else if (cell.id.substring(0, 8) == "lineTot1") {
                        cell.innerHTML = lineTot1;

                    } else if (cell.id.substring(0, 6) == "r15215") {
                        cellValue = $('#bscForm152_ind152' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r15215').val();
                        if (cellValue != "") {
                            cellValue = parseInt(cellValue);
                            if (!lineAotm) {
                                mtTot15 += cellValue;
                                mtTot15Fil += cellValue;
                                mtTot15FilGlo += cellValue;
                            }
                            mtTot15Glo += cellValue;
                            lineTot1 += cellValue;
                        }
                    } else if (cell.id.substring(0, 6) == "r15216") {
                        cellValue = $('#bscForm152_ind152' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r15216').val();
                        if (cellValue != "") {
                            cellValue = parseInt(cellValue);
                            if (!lineAotm) {
                                mtTot16 += cellValue;
                                mtTot16Fil += cellValue;
                                mtTot16FilGlo += cellValue;
                            }
                            mtTot16Glo += cellValue;
                            lineTot1 += cellValue;
                        }
                    } else if (cell.id.substring(0, 6) == "r15217") {
                        cellValue = $('#bscForm152_ind152' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r15217').val();
                        if (cellValue != "") {
                            cellValue = parseInt(cellValue);
                            if (!lineAotm) {
                                mtTot17 += cellValue;
                                mtTot17Fil += cellValue;
                                mtTot17FilGlo += cellValue;
                            }
                            mtTot17Glo += cellValue;
                            lineTot1 += cellValue;
                        }
                    } else if (cell.id.substring(0, 6) == "r15218") {
                        cellValue = $('#bscForm152_ind152' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r15218').val();
                        if (cellValue != "") {
                            cellValue = parseInt(cellValue);
                            if (!lineAotm) {
                                mtTot18 += cellValue;
                                mtTot18Fil += cellValue;
                                mtTot18FilGlo += cellValue;
                            }
                            mtTot18Glo += cellValue;
                            lineTot2 += cellValue;
                            lineTot3 += cellValue;
                        }
                    } else if (cell.id.substring(0, 6) == "r15219") {
                        cellValue = $('#bscForm152_ind152' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r15219').val();
                        if (cellValue != "") {
                            cellValue = parseInt(cellValue);
                            if (!lineAotm) {
                                mtTot19 += cellValue;
                                mtTot19Fil += cellValue;
                                mtTot19FilGlo += cellValue;
                            }
                            mtTot19Glo += cellValue;
                            lineTot2 += cellValue;
                            lineTot3 += cellValue;
                        }
                    } else if (cell.id.substring(0, 6) == "r15220") {
                        cellValue = $('#bscForm152_ind152' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r15220').val();
                        if (cellValue != "") {
                            cellValue = parseInt(cellValue);
                            if (!lineAotm) {
                                mtTot20 += cellValue;
                                mtTot20Fil += cellValue;
                                mtTot20FilGlo += cellValue;
                            }
                            mtTot20Glo += cellValue;
                            lineTot2 += cellValue;
                            lineTot4 += cellValue;
                        }
                    } else if (cell.id.substring(0, 6) == "r15221") {
                        cellValue = $('#bscForm152_ind152' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r15221').val();
                        if (cellValue != "") {
                            cellValue = parseInt(cellValue);
                            if (!lineAotm) {
                                mtTot21 += cellValue;
                                mtTot21Fil += cellValue;
                                mtTot21FilGlo += cellValue;
                            }
                            mtTot21Glo += cellValue;
                            lineTot2 += cellValue;
                            lineTot4 += cellValue;
                        }
                    } else if (cell.id.substring(0, 8) == "lineTot3") {
                        cell.innerHTML = lineTot3;
                    } else if (cell.id.substring(0, 8) == "lineTot4") {
                        cell.innerHTML = lineTot4;
                    } else if (cell.id.substring(0, 8) == "lineTot2") {
                        cell.innerHTML = lineTot2;
                    } else if (cell.id.substring(0, 5) == "r1521") {
                        cellValue = $('#bscForm152_ind152' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r1521').val();
                        if (cellValue != "") {
                            cellValue = parseInt(cellValue);
                            if (!lineAotm) {
                                mtTot1 += cellValue;
                                mtTot1Fil += cellValue;
                                mtTot1FilGlo += cellValue;
                            }
                            mtTot1Glo += cellValue;
                            lineTot1 += cellValue;
                        }
                    } else if (cell.id.substring(0, 5) == "r1522") {
                        cellValue = $('#bscForm152_ind152' + (lineAotm ? 'Aotm' : '') + 'sTemp_' + (lineAotm ? idxRowInputAotm : idxRowInput) + '_r1522').val();
                        if (cellValue != "") {
                            cellValue = parseInt(cellValue);

                            if (!lineAotm) {
                                mtTot2 += cellValue;
                                mtTot2Fil += cellValue;
                                mtTot2FilGlo += cellValue;
                            }
                            mtTot2Glo += cellValue;
                            lineTot1 += cellValue;
                        }

                    }

                }

                if (lineData) idxRowInput++;
                if (lineAotm) idxRowInputAotm++;

            }// end for line

        }

        {% endif %}


        /*
         * METHODE AJAX SUBMIT
         */
        $(function () {
            // Enregistrement en ajax
            $('form').on('submit', function (e) {
                var $this = $(this).closest('div');
                var btn = $(this).find("input[type=submit]:focus");
                var value_valide = $(btn).data('valide');
                $('#bscForm152_valide').val(value_valide);
                // Submit en ajax pour le fonctionnement d'appel par onglet
                e.preventDefault();

                $.ajax({
                    type: 'post',
                    url: '{{ path('bilan_conso_effectif_ind152_edit') }}?idFili={{ idFili }}',
                    data: $('form').serialize(),
                    success: function (responsejson) {
                        if (responsejson.data == 1) {
                            if (recordAuto) {
                                $('#progImg').hide();
                                $('#messageJS').html("Enregistrement automatique réussi");
                                messageJS.dialog("open");
                                setIncoherenceTable(responsejson);
                            } else {
                                $('#ind152').load('{{ path('bilan_conso_effectif_ind152_edit') }}?idFili={{ idFili }}', function () {
                                    $('#progImg').hide();
                                    $('#messageJS').html("Enregistrement réussi");
                                    messageJS.dialog("open");
                                    setIncoherenceTable(responsejson);

                                    var next = $($this).next('.panel-heading');
                                    if(next.length == 0) {
                                        window.location.href = '{{ path('bilan_conso_tpstrav_edit') }}';
                                    }
                                });

                            }
                        } else if (responsejson.data == "-3") {
                            $('#progImg').hide();
                            $('#messageJS').html("{{'erreur.unique.violation'|trans}}");
                            messageJS.dialog("open");
                        } else {
                            $('#progImg').hide();
                            $('#messageJS').html("Une erreur s'est produite dans l'enregistrement 1");
                            messageJS.dialog("open");
                        }


                    },
                    error: function (xhr, status, error) {
                        //alert(xhr);
                        $('#progImg').hide();
                        $('#messageJS').html("Une erreur s'est produite dans l'enregistrement 2 ");
                        messageJS.dialog("open");
                    }

                });

            });

        });

    </script>
{% endif %}
