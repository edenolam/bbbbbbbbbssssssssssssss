    {% set campagne = campagne_service.GetCurrentCampagne() %}
    {% set AnneeCamp = '' %}
    {% if campagne is not null %}
        {% set AnneeCamp = campagne.nmAnne %}
    {% endif %}

    {% if formEffectif140 is defined %}

        {{ form_start(formEffectif140) }}

        <h5>
            Champ : les tableaux qui suivent concernent les agents titulaires, stagiaires et contractuels (selon les possibilités légales)
         </h5>

         <table width="100%" id="ind141Table" class="table table-striped table-hover table-bordered">
             <thead>
                 <tr>
                     <th colspan="4" style="text-align: center">1.4.1 Nombre d'agents originaires de la collectivité
                 </tr>
                 <tr>
                     <th style="text-align: center" width="30%">(au 31/12/{{AnneeCamp}})</th>
                     <th style="text-align: center">Hommes</th>
                     <th style="text-align: center">Femmes</th>
                     <th class="filiTable" style="text-align: center">Total</th>
                 </tr>
             </thead>
             <tbody>
             {% for tag in formEffectif140.ind141s %}
                 {% if tag.newGroupe.vars.value == true and tag.idGrouPosistat.vars.value != null %}
                     <tr id="entetGroupe" hide="1" idGrou="{{ tag.idGrouPosistat.vars.value }}">
                         <th>
                             <b>{{ tag.lbGrouPosistat.vars.value }}</b>&nbsp;&nbsp;
                             {{ tag.lbGrouCompl.vars.value }}
                             <br/>
                             <i>{{ tag.lbGrouComm.vars.value }}</i>
                         </th>
                         <th style="text-align: center">Hommes</th>
                         <th style="text-align: center">Femmes</th>
                         <th class="filiTable" style="text-align: center">Total</th>
                     </tr>
                 {% endif %}

                 <tr
                     id="141trPS_{{tag.refPositionStatutaire.vars.value}}"
                     idTrGrou="{{ tag.idGrouPosistat.vars.value }}">
                     <td>
                         {{ form_widget(tag.refPositionStatutaire) }}
                         {{ form_widget(tag.idGrouPosistat) }}
                         {{ form_widget(tag.lbGrouPosistat) }}
                         {{ form_widget(tag.lbGrouCompl) }}
                         {{ form_widget(tag.lbGrouComm) }}
                         {{ form_widget(tag.newGroupe) }}
                         {{ form_widget(tag.lastGroupe) }}
                         <b>{{ tag.refPositionStatutaire.vars.data.lbPosistat}}</b>&nbsp;&nbsp;
                         {{ tag.refPositionStatutaire.vars.data.lbCompl }}
                         <br/>
                         <i>{{ tag.refPositionStatutaire.vars.data.lbComm }}</i>
                     </td>
                     <td id="r1411" style="text-align: center">{{ form_widget(tag.r1411) }}</td>
                     <td id="r1412" style="text-align: center">{{ form_widget(tag.r1412) }}</td>
                     <td class="filiTable" id="lineTot1" style="text-align: center">0</td>
                 </tr>

             {% endfor %}

             </tbody>
         </table>

         <br />

         <table width="100%" id="ind142Table" class="table table-striped table-hover table-bordered">
             <thead>
                 <tr>
                     <th colspan="7" style="text-align: center">1.4.2 Nombre d'agents originaires d'une autre structure
                        <th class="filiTable" rowspan="3" class="th-tableau-ind" style="text-align: center">Total</th>
                 </tr>

                 <tr>
                     <th rowspan="2" class="th-tableau-ind" style="text-align: center">(au 31/12/{{AnneeCamp}})</th>
                     <th colspan="2" style="text-align: center">Emploi non fonctionnel</th>
                     <th colspan="2" style="text-align: center">Emploi fonctionnel</th>
                     <th colspan="2" style="text-align: center">Emploi de cabinet</th>
                 </tr>

                 <tr>
                     <th style="text-align: center">Hommes</th>
                     <th style="text-align: center">Femmes</th>
                     <th style="text-align: center">Hommes</th>
                     <th style="text-align: center">Femmes</th>
                     <th style="text-align: center">Hommes</th>
                     <th style="text-align: center">Femmes</th>
                 </tr>
             </thead>
             <tbody>
             {% for tag in formEffectif140.ind142s %}

                 {% if tag.newGroupe.vars.value == true and tag.idGrouPosistat.vars.value != null %}
                     <tr id="entetGroupe" hide="1" idGrou="{{ tag.idGrouPosistat.vars.value }}">
                         <th>
                             <b>{{ tag.lbGrouPosistat.vars.value }}</b>&nbsp;&nbsp;
                             {{ tag.lbGrouCompl.vars.value }}
                             <br/>
                             <i>{{ tag.lbGrouComm.vars.value }}</i>
                         </th>
                     </tr>
                 {% endif %}

                 <tr
                     id="142trPS_{{tag.refPositionStatutaire.vars.value}}"
                     idTrGrou="{{ tag.idGrouPosistat.vars.value }}">
                     <td>
                         {{ form_widget(tag.refPositionStatutaire) }}
                         {{ form_widget(tag.idGrouPosistat) }}
                         {{ form_widget(tag.lbGrouPosistat) }}
                         {{ form_widget(tag.lbGrouCompl) }}
                         {{ form_widget(tag.lbGrouComm) }}
                         {{ form_widget(tag.newGroupe) }}
                         {{ form_widget(tag.lastGroupe) }}
                         <b>{{ tag.refPositionStatutaire.vars.data.lbPosistat}}</b>&nbsp;&nbsp;
                         {{ tag.refPositionStatutaire.vars.data.lbCompl }}
                         <br/>
                         <i>{{ tag.refPositionStatutaire.vars.data.lbComm }}</i>
                     </td>
                     <td id="r1421" style="text-align: center">{{ form_widget(tag.r1421) }}</td>
                     <td id="r1422" style="text-align: center">{{ form_widget(tag.r1422) }}</td>
                     <td id="r1423" style="text-align: center">{{ form_widget(tag.r1423) }}</td>
                     <td id="r1424" style="text-align: center">{{ form_widget(tag.r1424) }}</td>
                     <td id="r1425" style="text-align: center">{{ form_widget(tag.r1425) }}</td>
                     <td id="r1426" style="text-align: center">{{ form_widget(tag.r1426) }}</td>
                     <td class="filiTable" id="lineTot1" style="text-align: center">0</td>
                 </tr>

             {% endfor %}

             </tbody>
         </table>

             *par exemple : fonction publique d'un Etat de l'Union européenne (FPEUE).

        <br />


         <table width="100%" id="ind143Table" class="table table-striped table-hover table-bordered">
             <thead>
                 <tr>
                     <th colspan="7" style="text-align: center">1.4.3 Nombre d'agents originaires d'une autre structure mis à disposition (*)
                 </tr>

                 <tr>
                     <th rowspan="2" class="th-tableau-ind" style="text-align: center">(au 31/12/{{AnneeCamp}})</th>
                     <th colspan="2" style="text-align: center">Fonctionnaires</th>
                     <th colspan="2" style="text-align: center">Contractuels</th>
                     <th class="filiTable" colspan="1" style="text-align: center">Totaux</th>
                 </tr>

                 <tr>
                     <th style="text-align: center">Hommes</th>
                     <th style="text-align: center">Femmes</th>
                     <th style="text-align: center">Hommes</th>
                     <th style="text-align: center">Femmes</th>
                     <th class="filiTable"></th>
                 </tr>
             </thead>
             <tbody>
             {% for tag in formEffectif140.ind143s %}

                 {% if tag.newGroupe.vars.value == true and tag.idGrouPosistat.vars.value != null %}
                     <tr id="entetGroupe" hide="1" idGrou="{{ tag.idGrouPosistat.vars.value }}">
                         <th>
                             <b>{{ tag.lbGrouPosistat.vars.value }}</b>&nbsp;&nbsp;
                             {{ tag.lbGrouCompl.vars.value }}
                             <br/>
                             <i>{{ tag.lbGrouComm.vars.value }}</i>
                         </th>
                     </tr>
                 {% endif %}

                 <tr
                     id="143trPS_{{tag.refPositionStatutaire.vars.value}}"
                     idTrGrou="{{ tag.idGrouPosistat.vars.value }}">
                     <td>
                         {{ form_widget(tag.refPositionStatutaire) }}
                         {{ form_widget(tag.idGrouPosistat) }}
                         {{ form_widget(tag.lbGrouPosistat) }}
                         {{ form_widget(tag.lbGrouCompl) }}
                         {{ form_widget(tag.lbGrouComm) }}
                         {{ form_widget(tag.newGroupe) }}
                         {{ form_widget(tag.lastGroupe) }}
                         <b>{{ tag.refPositionStatutaire.vars.data.lbPosistat}}</b>&nbsp;&nbsp;
                         {{ tag.refPositionStatutaire.vars.data.lbCompl }}
                         <br/>
                         <i>{{ tag.refPositionStatutaire.vars.data.lbComm }}</i>
                     </td>
                     <td id="r1431_{{loop.index}}" style="text-align: center">{{ form_widget(tag.r1431) }}</td>
                     <td id="r1432_{{loop.index}}" style="text-align: center">{{ form_widget(tag.r1432) }}</td>
                     <td id="r1433_{{loop.index}}" style="text-align: center">{{ form_widget(tag.r1433) }}</td>
                     <td id="r1434_{{loop.index}}" style="text-align: center">{{ form_widget(tag.r1434) }}</td>
                     <td class="filiTable" id="lineTot_{{loop.index}}" style="text-align: center">0</td>
                 </tr>

             {% endfor %}

             </tbody>
         </table>
(*) Décret n° 2008-580 du 18 juin 2008 relatif au régime de la mise à disposition applicable aux collectivités territoriales et aux établissements publics administratifs locaux.

        <br/>

        <table width="100%" id="ind144Table" class="table table-striped table-hover table-bordered">
             <thead>
                 <tr>
                     <th colspan="7" style="text-align: center">1.4.4 Fonctionnaires pris en charge par le CDG ou le CNFTP (articles 53 et 97) (*)
                 </tr>

                 <tr>
                     <th class="th-tableau-ind" style="text-align: center">(au 31/12/{{AnneeCamp}})</th>
                     <th style="text-align: center">Hommes</th>
                     <th style="text-align: center">Femmes</th>
                     <th class="filiTable" style="text-align: center">Total</th>
                 </tr>
             </thead>
             <tbody>
             {% for tag in formEffectif140.ind144s %}

                 {% if tag.newGroupe.vars.value == true and tag.idGrouPosistat.vars.value != null %}
                     <tr id="entetGroupe" hide="1" idGrou="{{ tag.idGrouPosistat.vars.value }}">
                         <th>
                             <b>{{ tag.lbGrouPosistat.vars.value }}</b>&nbsp;&nbsp;
                             {{ tag.lbGrouCompl.vars.value }}
                             <br/>
                             <i>{{ tag.lbGrouComm.vars.value }}</i>
                         </th>
                     </tr>
                 {% endif %}

                 <tr
                     id="144trPS_{{tag.refPositionStatutaire.vars.value}}"
                     idTrGrou="{{ tag.idGrouPosistat.vars.value }}">
                     <td>
                         {{ form_widget(tag.refPositionStatutaire) }}
                         {{ form_widget(tag.idGrouPosistat) }}
                         {{ form_widget(tag.lbGrouPosistat) }}
                         {{ form_widget(tag.lbGrouCompl) }}
                         {{ form_widget(tag.lbGrouComm) }}
                         {{ form_widget(tag.newGroupe) }}
                         {{ form_widget(tag.lastGroupe) }}
                         <b>{{ tag.refPositionStatutaire.vars.data.lbPosistat}}</b>&nbsp;&nbsp;
                         {{ tag.refPositionStatutaire.vars.data.lbCompl }}
                         <br/>
                         <i>{{ tag.refPositionStatutaire.vars.data.lbComm }}</i>
                     </td>
                     <td id="r1441" style="text-align: center">{{ form_widget(tag.r1441) }}</td>
                     <td id="r1442" style="text-align: center">{{ form_widget(tag.r1442) }}</td>
                     <td class="filiTable" id="lineTot1" style="text-align: center">0</td>
                 </tr>

             {% endfor %}

             </tbody>
         </table>

             (*) Seuls le CNFPT et les CDG doivent renseigner cet indicateur.

        <br />

        <input class="btn button-tableau pull-right" type="submit" value="Enregistrer et valider les contôles de cohérence" name="valider" onclick="recordAuto = false;
                $('#progImg').show();" data-valide="1" />

        <img id="progImg" src="{{ asset("img/progress.gif") }}" style="display:none"/>

        {{ form_end(formEffectif140) }}



        <script type="text/javascript">

            $(document).ready(function ()
            {
                {% include 'stickyheader.txt' %}
                getBrowserSetSticky(ind141Table);
                
                changeDetect = false;
                // TABLEAU 140X
                $(document).change();
                update141(true);
                update142(true);
                update143(true);
                update144(true);
           });

            /*
             * METHODES Tableau 1.4.X
             */
            function changedR141(obj) {
                update141(false);
            }

            function changedR142(obj) {
                update142(false);
            }

            function changedR143(obj) {
                update143(false);
            }

            function changedR144(obj) {
                update144(false);
            }


            function update141(onInit) {
                var table141 = document.getElementById('ind141Table');
                var rowLength141 = table141.rows.length;
                var idxRowInput = 0;
                if (navigator.userAgent.search("Chrome") >= 0) {
                        idxRowInput = -2;
                    }

                var mtTot1 = 0;
                var mtTot2 = 0;

                for (var i = 2; i < rowLength141; i += 1) {
                    var row = table141.rows[i];
                    var cellLength = row.cells.length; // 10 sur le rowspan, 9 sinon
                    var lineTot1 = 0;



                    if (row.id.substring(0, 11) == "entetGroupe") {
                        continue;
                    }

                    lineTot1 = 0;
                    for (var y = 0; y < cellLength; y += 1) {
                        var cell = row.cells[y];
                        if (cell.id.substring(0, 6) == "r1411") {
                            if ($('#bscForm140_ind141s_' + idxRowInput + '_r1411').val() != "") {
                                mtTot1 += parseInt($('#bscForm140_ind141s_' + idxRowInput + '_r1411').val());
                                lineTot1 += parseInt($('#bscForm140_ind141s_' + idxRowInput + '_r1411').val());
                            }
                        } else if (cell.id.substring(0, 6) == "r1412") {
                            if ($('#bscForm140_ind141s_' + idxRowInput + '_r1412').val() != "") {
                                mtTot2 += parseInt($('#bscForm140_ind141s_' + idxRowInput + '_r1412').val());
                                lineTot1 += parseInt($('#bscForm140_ind141s_' + idxRowInput + '_r1412').val());
                            }

                        } else if (cell.id.substring(0, 8) == "lineTot1") {
                            cell.innerHTML = lineTot1;
                        }

                    }

                    idxRowInput++;
                }// end for line


            }

            function update142(onInit) {
                var table142 = document.getElementById('ind142Table');
                var rowLength142 = table142.rows.length;
                var idxRowInput = 0;

                var mtTot1 = 0;
                var mtTot2 = 0;
                var mtTot3 = 0;
                var mtTot4 = 0;
                var mtTot5 = 0;
                var mtTot6 = 0;

                var mtTot1Glo = 0;
                var mtTot2Glo = 0;
                var mtTot3Glo = 0;
                var mtTot4Glo = 0;
                var mtTot5Glo = 0;
                var mtTot6Glo = 0;

                for (var i = 4; i < rowLength142; i += 1) {
                    var row = table142.rows[i];
                    var cellLength = row.cells.length; // 10 sur le rowspan, 9 sinon

                    var lineTotalMd = false;
                    var lineTot1 = 0;

                    if (row.id.substring(0, 8) == "lineTot1") {
                        lineTotalMd = true;
                        for (var y = 0; y < cellLength; y += 1) {
                            var cell = row.cells[y];
                            if (y == 1) {
                                cell.innerHTML = mtTot1Glo;
                                lineTot1 += mtTot1Glo;
                                mtTot1Glo = 0;
                            } else if (y == 2) {
                                cell.innerHTML = mtTot2Glo;
                                lineTot1 += mtTot2Glo;
                                mtTot2Glo = 0;
                            } else if (y == 3) {
                                cell.innerHTML = mtTot3Glo;
                                lineTot1 += mtTot3Glo;
                                mtTot3Glo = 0;
                            } else if (y == 4) {
                                cell.innerHTML = mtTot4Glo;
                                lineTot1 += mtTot4Glo;
                                mtTot4Glo = 0;
                            } else if (y == 5) {
                                cell.innerHTML = mtTot5Glo;
                                lineTot1 += mtTot5Glo;
                                mtTot5Glo = 0;
                            } else if (y == 6) {
                                cell.innerHTML = mtTot6Glo;
                                lineTot1 += mtTot6Glo;
                                mtTot6Glo = 0;
                            } else if (y == 7) {
                               cell.innerHTML = lineTot1;
                            }
                        }
                    }

                    lineTot1 = 0;
                    for (var y = 1; y < cellLength; y += 1) {
                        var cell = row.cells[y];
                        if (cell.id.substring(0, 6) == "r1421") {
                            if ($('#bscForm140_ind142s_' + idxRowInput + '_r1421').val() != "") {
                                mtTot1 += parseInt($('#bscForm140_ind142s_' + idxRowInput + '_r1421').val());
                                mtTot1Glo += parseInt($('#bscForm140_ind142s_' + idxRowInput + '_r1421').val());
                                lineTot1 += parseInt($('#bscForm140_ind142s_' + idxRowInput + '_r1421').val());
                            }
                        } else if (cell.id.substring(0, 6) == "r1422") {
                            if ($('#bscForm140_ind142s_' + idxRowInput + '_r1422').val() != "") {
                                mtTot2 += parseInt($('#bscForm140_ind142s_' + idxRowInput + '_r1422').val());
                                mtTot2Glo += parseInt($('#bscForm140_ind142s_' + idxRowInput + '_r1422').val());
                                lineTot1 += parseInt($('#bscForm140_ind142s_' + idxRowInput + '_r1422').val());
                            }
                        } else if (cell.id.substring(0, 6) == "r1423") {
                            if ($('#bscForm140_ind142s_' + idxRowInput + '_r1423').val() != "") {
                                mtTot3 += parseInt($('#bscForm140_ind142s_' + idxRowInput + '_r1423').val());
                                mtTot3Glo += parseInt($('#bscForm140_ind142s_' + idxRowInput + '_r1423').val());
                                lineTot1 += parseInt($('#bscForm140_ind142s_' + idxRowInput + '_r1423').val());
                            }

                        } else if (cell.id.substring(0, 6) == "r1424") {
                            if ($('#bscForm140_ind142s_' + idxRowInput + '_r1424').val() != "") {
                                mtTot4 += parseInt($('#bscForm140_ind142s_' + idxRowInput + '_r1424').val());
                                mtTot4Glo += parseInt($('#bscForm140_ind142s_' + idxRowInput + '_r1424').val());
                                lineTot1 += parseInt($('#bscForm140_ind142s_' + idxRowInput + '_r1424').val());
                            }
                        } else if (cell.id.substring(0, 6) == "r1425") {
                            if ($('#bscForm140_ind142s_' + idxRowInput + '_r1425').val() != "") {
                                mtTot5 += parseInt($('#bscForm140_ind142s_' + idxRowInput + '_r1425').val());
                                mtTot5Glo += parseInt($('#bscForm140_ind142s_' + idxRowInput + '_r1425').val());
                                lineTot1 += parseInt($('#bscForm140_ind142s_' + idxRowInput + '_r1425').val());
                            }
                        } else if (cell.id.substring(0, 6) == "r1426") {
                            if ($('#bscForm140_ind142s_' + idxRowInput + '_r1426').val() != "") {
                                mtTot6 += parseInt($('#bscForm140_ind142s_' + idxRowInput + '_r1426').val());
                                mtTot6Glo += parseInt($('#bscForm140_ind142s_' + idxRowInput + '_r1426').val());
                                lineTot1 += parseInt($('#bscForm140_ind142s_' + idxRowInput + '_r1426').val());
                            }

                        } else if (cell.id.substring(0, 8) == "lineTot1") {
                            cell.innerHTML = lineTot1;

                        }


                    }

                    if (!lineTotalMd)
                        idxRowInput++;
                }// end for line

                if (!onInit) {

                }

            }

            function update143(onInit) {
                var table143 = document.getElementById('ind143Table');
                var rowLength143 = table143.rows.length;
                var idxRowInput = 0;

                var mtTot1 = 0;
                var mtTot2 = 0;
                var mtTot3 = 0;
                var mtTot4 = 0;

                var mtTot1Glo = 0;
                var mtTot2Glo = 0;
                var mtTot3Glo = 0;
                var mtTot4Glo = 0;

                for (var i = 3; i < rowLength143; i += 1) {
                    var row = table143.rows[i];
                    var cellLength = row.cells.length; // 10 sur le rowspan, 9 sinon

                    var lineTotalMd = false;
                    var lineTot1 = 0;

                    if (row.id.substring(0, 8) == "lineTot1") {
                        lineTotalMd = true;
                        for (var y = 0; y < cellLength; y += 1) {
                            var cell = row.cells[y];
                            if (y == 1) {
                                cell.innerHTML = mtTot1Glo;
                                lineTot1 += mtTot1Glo;
                                mtTot1Glo = 0;
                            } else if (y == 2) {
                                cell.innerHTML = mtTot2Glo;
                                lineTot1 += mtTot2Glo;
                                mtTot2Glo = 0;
                            } else if (y == 3) {
                                cell.innerHTML = mtTot3Glo;
                                lineTot1 += mtTot3Glo;
                                mtTot3Glo = 0;
                            } else if (y == 4) {
                                cell.innerHTML = mtTot4Glo;
                                lineTot1 += mtTot4Glo;
                                mtTot4Glo = 0;
                            } else if (y == 5) {
                               cell.innerHTML = lineTot1;
                            }
                        }
                    }

                    lineTot1 = 0;
                    for (var y = 1; y < cellLength; y += 1) {
                        var cell = row.cells[y];
                        if (cell.id.substring(0, 6) == "r1431") {
                            if ($('#bscForm140_ind143s_' + idxRowInput + '_r1431').val() != "") {
                                mtTot1 += parseInt($('#bscForm140_ind143s_' + idxRowInput + '_r1431').val());
                                mtTot1Glo += parseInt($('#bscForm140_ind143s_' + idxRowInput + '_r1431').val());
                                lineTot1 += parseInt($('#bscForm140_ind143s_' + idxRowInput + '_r1431').val());
                            }
                        } else if (cell.id.substring(0, 6) == "r1432") {
                            if ($('#bscForm140_ind143s_' + idxRowInput + '_r1432').val() != "") {
                                mtTot2 += parseInt($('#bscForm140_ind143s_' + idxRowInput + '_r1432').val());
                                mtTot2Glo += parseInt($('#bscForm140_ind143s_' + idxRowInput + '_r1432').val());
                                lineTot1 += parseInt($('#bscForm140_ind143s_' + idxRowInput + '_r1432').val());
                            }
                        } else if (cell.id.substring(0, 6) == "r1433") {
                            if ($('#bscForm140_ind143s_' + idxRowInput + '_r1433').val() != "") {
                                mtTot3 += parseInt($('#bscForm140_ind143s_' + idxRowInput + '_r1433').val());
                                mtTot3Glo += parseInt($('#bscForm140_ind143s_' + idxRowInput + '_r1433').val());
                                lineTot1 += parseInt($('#bscForm140_ind143s_' + idxRowInput + '_r1433').val());
                            }

                        } else if (cell.id.substring(0, 6) == "r1434") {
                            if ($('#bscForm140_ind143s_' + idxRowInput + '_r1434').val() != "") {
                                mtTot4 += parseInt($('#bscForm140_ind143s_' + idxRowInput + '_r1434').val());
                                mtTot4Glo += parseInt($('#bscForm140_ind143s_' + idxRowInput + '_r1434').val());
                                lineTot1 += parseInt($('#bscForm140_ind143s_' + idxRowInput + '_r1434').val());
                            }

                        } else if (cell.id.substring(0, 8) == "lineTot1") {
                            cell.innerHTML = lineTot1;

                        }


                    }

                    if (!lineTotalMd)
                        idxRowInput++;
                }// end for line
                var tr_tab = $('#ind143Table > tbody').find('tr');
                $(tr_tab).each(function( index, element ) {
                    // element == this
                   var inputs = $(this).find('.positiveInteger');
                   var total_field = $(this).find('.filiTable');
                   var input_total = 0;
                   inputs.each(function(index1, element1){
                       if(isEmpty($(element1).val())){
                           $(element1).val(0);
                       }
                       input_total += (parseInt($(element1).val()));
                   });
                  $(total_field).text(input_total);
                });
                
                if (!onInit) {

                }

            }

            function update144(onInit) {
                var table144 = document.getElementById('ind144Table');
                var rowLength144 = table144.rows.length;
                var idxRowInput = 0;

                var mtTot1 = 0;
                var mtTot2 = 0;

                var mtTot1Glo = 0;
                var mtTot2Glo = 0;

                for (var i = 3; i < rowLength144; i += 1) {
                    var row = table144.rows[i];
                    var cellLength = row.cells.length; // 10 sur le rowspan, 9 sinon

                    var lineTotalMd = false;
                    var lineTot1 = 0;

                    if (row.id.substring(0, 8) == "lineTot1") {
                        lineTotalMd = true;
                        for (var y = 0; y < cellLength; y += 1) {
                            var cell = row.cells[y];
                            if (y == 1) {
                                cell.innerHTML = mtTot1Glo;
                                lineTot1 += mtTot1Glo;
                                mtTot1Glo = 0;
                            } else if (y == 2) {
                                cell.innerHTML = mtTot2Glo;
                                lineTot1 += mtTot2Glo;
                                mtTot2Glo = 0;
                            } else if (y == 3) {
                               cell.innerHTML = lineTot1;
                            }
                        }
                    }

                    lineTot1 = 0;
                    for (var y = 1; y < cellLength; y += 1) {
                        var cell = row.cells[y];
                        if (cell.id.substring(0, 6) == "r1441") {
                            if ($('#bscForm140_ind144s_' + idxRowInput + '_r1441').val() != "") {
                                mtTot1 += parseInt($('#bscForm140_ind144s_' + idxRowInput + '_r1441').val());
                                mtTot1Glo += parseInt($('#bscForm140_ind144s_' + idxRowInput + '_r1441').val());
                                lineTot1 += parseInt($('#bscForm140_ind144s_' + idxRowInput + '_r1441').val());
                            }
                        } else if (cell.id.substring(0, 6) == "r1442") {
                            if ($('#bscForm140_ind144s_' + idxRowInput + '_r1442').val() != "") {
                                mtTot2 += parseInt($('#bscForm140_ind144s_' + idxRowInput + '_r1442').val());
                                mtTot2Glo += parseInt($('#bscForm140_ind144s_' + idxRowInput + '_r1442').val());
                                lineTot1 += parseInt($('#bscForm140_ind144s_' + idxRowInput + '_r1442').val());
                            }
                        } else if (cell.id.substring(0, 8) == "lineTot1") {
                            cell.innerHTML = lineTot1;

                        }


                    }

                    if (!lineTotalMd)
                        idxRowInput++;
                }// end for line

                if (!onInit) {

                }

            }

            /*
             * METHODE AJAX SUBMIT
             */
            $(function () {
                // Enregistrement en ajax
                $('form').on('submit', function (e) {
                    var $this = $(this).closest('div');
                    var btn = $(this).find("input[type=submit]:focus");
                    var value_valide = $(btn).data('valide');
                    $('#bscForm140_valide').val(value_valide);

                    // Submit en ajax pour le fonctionnement d'appel par onglet // $('form').serialize(), 'valide': test
                    e.preventDefault();
                    $.ajax({
                        type: 'post',
                        url: '{{ path('bilan_conso_effectif_ind140_edit') }}',
                        data: $('form').serialize(),
                        success: function (responsejson) {
                            if (responsejson.data == 1) {
                                if (recordAuto) {
                                    $('#progImg').hide();
                                    $('#messageJS').html("Enregistrement automatique réussi");

                                    messageJS.dialog("open");
                                    setIncoherenceTable(responsejson);


                                } else {
                                    $('#ind140').load('{{ path('bilan_conso_effectif_ind140_edit') }}', function () {
                                        $('#progImg').hide();
                                        $('#messageJS').html("Enregistrement réussi");

                                        messageJS.dialog("open");
                                        setIncoherenceTable(responsejson);

                                        var next = $($this).next('.panel-heading');
                                        if(next.length == 0) {
                                            window.location.href = '{{ path('bilan_conso_mouv_edit') }}';
                                        }
                                    });

                                }
                            } else if (responsejson.data == "-3") {
                                $('#progImg').hide();
                                $('#messageJS').html("{{'erreur.unique.violation'|trans}}");
                                messageJS.dialog("open");
                            } else {
                                $('#progImg').hide();
                                $('#messageJS').html("Une erreur s'est produite dans l'enregistrement 1");
                                messageJS.dialog("open");
                            }


                        },
                        error: function (xhr, status, error) {
                            //alert(xhr);
                            $('#progImg').hide();
                            $('#messageJS').html("Une erreur s'est produite dans l'enregistrement : ");
                            messageJS.dialog("open");
                        }

                    });
                });
            }
            )
                    ;
        </script>
    {% endif %}
